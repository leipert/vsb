!function(){"use strict";function e(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}function t(e,t,r){e.getItem("current").then(function(e){null!==e&&void 0!==e&&e.CONFIG===t.name&&r.translateJSONToVSBL(e)})}function r(e,t,r,n,a){function i(){if(!s){var r={VSBProtocol:t.location.protocol,EndpointProtocol:o.protocol,VSBLink:o.protocol+"//"+t.location.host+t.location.pathname+t.location.hash},n='<span translate="MIXED_CONTENT_WARNING" translate-values=\''+JSON.stringify(r)+"'></span>";e.addMessage({message:n,"class":"warning",icon:"exclamation-triangle"})}}var s=!1,o=document.createElement("a");o.href=a.baseURL,t.location.protocol!==o.protocol&&(r.get(a.baseURL+"?query=select+%3Fs+where+%7B%5B%5D+a+%3Fs%7D+LIMIT+1&format=json").success(function(){s=!0}),n(function(){},1e3).then(i))}angular.module("VSB",["VSB.message","VSB.config","VSB.layout","VSB.filters","VSB.subject","VSB.mainCtrl","VSB.language","pascalprecht.translate"]).run(r).run(t).config(e),e.$inject=["$compileProvider"],t.$inject=["$localForage","globalConfig","TranslatorToVSBL"],r.$inject=["MessageService","$window","$http","$timeout","globalConfig"]}(),angular.module("VSB").run(["$templateCache",function(e){e.put("/components/ui.select/choiceRowInner.tpl.html",'<div class=ui-select-choices-row-inner><div class=content ng-class="{\'has-comment\':item.$comment}"><p><span ng-bind-html="item.$label | highlightSearchTerm: $select.search"></span><b ng-if="item.type === \'INVERSE_PROPERTY\'" class=text-danger>&#x207b;&#x00b9;</b></p><p ng-bind-html="item.uri | replaceURIsWithPrefixes | highlightSearchTerm: $select.search"></p></div><div ng-if=item.$comment ng-class="{\'highlight\': $select.containsSearchTerm(item.$comment,$select.search)}" bs-popover data-trigger=hover data-type=success data-container=body data-placement=left data-html=true data-content="{{item.$comment| highlightSearchTerm: $select.search}}" class=fa-stack><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-info fa-stack-1x"></i></div></div>'),e.put("/components/ui.select/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" ng-class="{\'no-divider\':($select.items.length === 0)}" role=listbox><li class=ui-select-choices-list ng-show="$select.items.length > 0"><div class=ui-select-choices-group id="ui-select-choices-{{ $select.generatedId }}"><div class=divider ng-show="$select.isGrouped && $index > 0"></div><div ng-show=$select.isGrouped class="ui-select-choices-group-label dropdown-header">{{$group.name | translate}}</div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class=ui-select-choices-row ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role=option><a href=javascript:void(0) class=ui-select-choices-row-inner></a></div></div></li><li class=ui-select-footer><div class=divider ng-if="$select.items.length > 0"></div><div class=ui-select-footer-content><small ng-if="$select.items.length === 0" translate={{::footerZero}}></small><div ng-if=$select.items.length><small ng-if="$select.search.length === 0" translate={{::footerNoSearch}} translate-values="{ matching: $select.items.length, total: $select.totalItems }"></small> <small ng-if="$select.items.length.toString() !== $select.matchingItems && $select.search.length > 0" translate-values="{ x: $select.items.length, matching: $select.matchingItems, total: $select.totalItems }" translate="{{::footerFound+ \'_MORE\'}}"></small> <small ng-if="$select.items.length.toString() === $select.matchingItems && $select.search.length > 0" translate-values="{ matching: $select.matchingItems, total: $select.totalItems }" translate="{{::footerFound }}"></small></div></div></li></ul>'),e.put("/components/ui.select/match-multiple.tpl.html",'<span class=ui-select-match><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex=-1 type=button ng-disabled=$select.disabled ng-click="$select.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$select.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort=$select.selected><span class="close ui-select-match-close" ng-hide=$select.disabled ng-click=$select.removeChoice($index)>&nbsp;&times;</span> <span uis-transclude-append></span></span></span></span>'),e.put("/components/ui.select/match.tpl.html",'<div class=ui-select-match ng-hide=$select.open ng-disabled=$select.disabled ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex=-1 class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled=$select.disabled ng-click=$select.activate() style="outline: 0"><span ng-show=$select.isEmpty() class="ui-select-placeholder text-muted text-left">{{$select.placeholder}}</span> <span ng-hide=$select.isEmpty() class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click=$select.toggle($event)></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" ng-click=$select.clear($event) class="btn btn-xs btn-link pull-right ui-select-clear"><i class="fa fa-trash-o" aria-hidden=true></i></a></span></div>'),e.put("/components/ui.select/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class=ui-select-match></div><input autocomplete=off autocorrect=off autocapitalize=off spellcheck=false class="ui-select-search input-xs" placeholder={{$select.getPlaceholder()}} ng-disabled=$select.disabled ng-hide=$select.disabled ng-click=$select.activate() ng-model=$select.search role=combobox aria-label="{{ $select.baseTitle }}" ondrop="return false"></div><div class=ui-select-choices></div></div>'),e.put("/components/ui.select/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class=ui-select-match></div><input autocomplete=off tabindex=-1 aria-expanded=true aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder={{$select.placeholder}} ng-model=$select.search ng-show="$select.searchEnabled && $select.open"><div class=ui-select-choices></div></div>'),e.put("/modules/result/content.tpl.html",'<div id=result><h3>{{ \'RESULTS\' | translate }}</h3><div class="panel panel-default"><div class=panel-heading><h3 class=panel-title>{{\'QUERY_EXECUTOR\' | translate}}</h3></div><div class=panel-body><form name=runQuery novalidate ng-submit=openInNewTab()><div class="form-group col-xs-12 col-md-6" ng-class="{ \'has-error\': runQuery.endpoint.$invalid && runQuery.$submitted }"><label for=endpoint class=control-label>{{\'ENDPOINT\' | translate}}</label><input ng-model=queryExecutor.endpoint class=form-control id=endpoint name=endpoint required placeholder="{{\'ENDPOINT\' | translate}}"><p class=help-block ng-if="runQuery.endpoint.$error.required && runQuery.$submitted">{{\'REQUIRED_ERROR\' | translate }}</p></div><div class="form-group col-xs-6 col-md-3" ng-class="{ \'has-error\': runQuery.limit.$invalid && runQuery.$submitted }"><label for=limit class=control-label>{{\'LIMIT\' | translate}}</label><input type=number ng-model=queryExecutor.limit class=form-control id=limit name=limit step=25 required placeholder="{{\'LIMIT\' | translate}}"><p class=help-block ng-if="runQuery.limit.$error.required && runQuery.$submitted">{{\'REQUIRED_ERROR\' | translate }}</p><p class=help-block ng-if="runQuery.limit.$error.number && runQuery.$submitted">{{\'NUMBER_ERROR\' | translate }}</p></div><div class="form-group col-xs-6 col-md-3" ng-class="{ \'has-error\': runQuery.offset.$invalid && runQuery.$submitted }"><label for=offset class=control-label>{{\'OFFSET\' | translate}}</label><input type=number ng-model=queryExecutor.offset class=form-control id=offset name=offset step=25 required placeholder="{{\'OFFSET\' | translate}}"><p class=help-block ng-if="runQuery.offset.$error.required && runQuery.$submitted">{{\'REQUIRED_ERROR\' | translate }}</p><p class=help-block ng-if="runQuery.offset.$error.number && runQuery.$submitted">{{\'NUMBER_ERROR\' | translate }}</p></div><div class="form-group col-xs-6 col-md-3" ng-class="{ \'has-error\': runQuery.resultFormat.$invalid && runQuery.$submitted }"><label for=resultFormat class=control-label>{{\'FORMAT\' | translate}}</label><select class=form-control id=resultFormat name=resultFormat ng-model=queryExecutor.resultFormat required ng-options="format.name for format in resultFormats"><option value="">{{\'SELECT_FORMAT\' | translate}}</option></select><p class=help-block ng-if="runQuery.resultFormat.$error.required && runQuery.$submitted">{{\'REQUIRED_ERROR\' | translate }}</p></div><div class="form-group col-xs-6 col-md-3"><label for=limit>&nbsp;</label><br><button type=submit class="btn btn-default">{{\'RUN_QUERY\' | translate}}</button></div></form></div></div><div bs-tabs><div ng-repeat="tab in tabs" title="{{ tab.title | translate }}" name="{{ tab.title | translate }}" bs-pane><div class="panel panel-default"><div class=panel-body ng-include=tab.template></div></div></div></div></div>'),e.put("/modules/result/navigation.tpl.html",'<div class=list-group><a class=list-group-item ui-sref=workspace><i class="fa fa-fw fa-3x fa-backward"></i> <span class=list-group-item-description>{{ \'BACK_TO_WORKSPACE\' | translate }}</span></a> <a class=list-group-item ng-href="{{ blobURL }}" download=query.json target=_blank><i class="fa fa-fw fa-3x fa-download"></i> <span class=list-group-item-description>{{ \'DOWNLOAD_JSON\' | translate }}</span></a></div>'),e.put("/modules/workspace/content.tpl.html",'<div id=workspace><div ng-mousedown=vm.workspaceMouseDown($event) ng-mousemove=vm.workspaceMouseMove($event) ng-mouseup=vm.workspaceMouseUp() ng-class="{\'mouse-down\':vm.mouseDown}" class=bg-scroll></div><div messages></div><div class=startPointCSS id=startpoint><b>{{ \'LIST_ALL\' | translate }}</b><select ng-if="vm.groups.length > 1" ng-model=vm.mainSubject ng-change=vm.updateMainSubject() ng-options="s.alias for s in vm.groups | orderBy : \'alias\'" title="Main Subject Select" class=pull-right><option style=display:none value="">{{ \'PICK_MAIN_SUBJECT\' | translate }}</option></select></div><div class=connectNotification ng-if=vm.searchSubject><b>{{\'SEARCH_RELATION\' | translate:vm.searchSubject}}</b></div><div class="addSubjectBox form-group pull-right" ng-class={loading:vm.loading}><div ng-if=vm.loading class=loading><i class="fa fa-spinner fa-spin"></i> {{ \'CLASSES_LOADING\' | translate }}</div><div ng-if=!vm.loading><div ng-if="vm.totalItems === 0" class=loading><i class="fa fa-exclamation-triangle"></i> {{ \'NO_CLASSES_FOUND\' | translate }}</div><div class=input-group ng-if="vm.totalItems > 0"><ui-select ng-model=vm.selectedSubject append-to-body=true><ui-select-match allow-clear=true placeholder="{{ \'CHOOSE_A_SUBJECT\' | translate }}">{{$select.selected.$label}}</ui-select-match><ui-select-choices repeat="item.uri as item in vm.availableSubjectClasses" refresh="vm.refreshClasses($select.search, 50)" refresh-delay=0 total-items={{vm.totalItems}} matching-items={{vm.matchingItems}} footer-zero=CLASSES_FOUND_ZERO footer-no-search=CLASSES_FOUND_NO_SEARCH footer-found=CLASSES_FOUND_X><ui-select-choices-row-inner></ui-select-choices-row-inner></ui-select-choices></ui-select><span class=input-group-btn><button ng-click=vm.addSubject(vm.selectedSubject) class="btn btn-success"><span class="fa fa-plus"></span></button></span></div></div></div><subject-dir subject=subjectInst ng-repeat="subjectInst in vm.subjects track by subjectInst.$id"></subject-dir></div>'),e.put("/modules/workspace/navigation.tpl.html",'<div class=list-group><a class=list-group-item ng-click=vm.translate()><i class="fa fa-fw fa-3x fa-play-circle"></i> <span class=list-group-item-description>{{ \'RUN_QUERY\' | translate }}</span></a> <a id=reset class=list-group-item ng-click=vm.resetWorkspace()><i class="fa fa-fw fa-3x fa-undo"></i> <span class=list-group-item-description>{{ \'RESET_WORKSPACE\' | translate }}</span></a> <span class=list-group-item><i class="fa fa-fw fa-3x fa-upload"></i> <input type=file id=JSONReader name=JSONReader jsonreader> <span class=list-group-item-description>{{ \'LOAD_JSON\' | translate }}</span></span> <a class=list-group-item ng-click=CallMe(1)><i class="fa fa-fw fa-3x fa-question"></i> <span class=list-group-item-description>{{ \'HELP\' | translate }}</span></a> <a class=list-group-item ng-click=vm.print()><i class="fa fa-fw fa-3x fa-print"></i> <span class=list-group-item-description>{{ \'PRINT_PREVIEW\' | translate }}</span></a> <a class=list-group-item><i class="fa fa-fw fa-3x fa-language"></i> <span class=list-group-item-description><button ng-click="vm.changeLanguage(\'de\')" translate=BUTTON_LANG_DE class="btn btn-sm btn-primary"></button> <button ng-click="vm.changeLanguage(\'en\')" translate=BUTTON_LANG_EN class="btn btn-sm btn-primary"></button></span></a></div>'),e.put("/modules/result/tabs/json.tpl.html","<pre id=json-query>{{translatedJSON}}</pre>"),e.put("/modules/result/tabs/preview.tpl.html","<pre id=json-query>{{translatedSPARQL}}</pre>"),e.put("/modules/result/tabs/sparql.tpl.html","<pre id=sparql-query>{{translatedSPARQL}}</pre>"),e.put("/modules/workspace/modals/addAppropriateClass.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h1 class="modal-title h4">Possible {{property.alias}} of {{subject.alias}}:</h1><div class=input-group style="padding-top: 10px;width:100%"><input class=form-control placeholder="Filter available Classes" ng-model=search.$></div></div><div class=modal-body style="max-height: 350px; overflow-y: scroll"><h2 class=h5>{{subject.alias}} <i class="fa fa-fw" ng-class=arrowClass></i> {{property.alias}} <i class="fa fa-fw" ng-class=arrowClass></i> ???</h2><div class=list-group><a class=list-group-item ng-class="(selected === subject)?\'active\':\'\'" ng-repeat="subject in availableSubjects | filter : search" ng-click=select(subject)><popover-wrap ng-if=subject.$comment data-settings="{ class: \'fa fa-fw fa-info-circle pull-right\', content: subject.$comment }"></popover-wrap>{{ subject.$label }} <small>({{subject.uri | replaceURIsWithPrefixes}})</small></a></div></div><div class=modal-footer><div ng-if=selected class="pull-left text-left">Do you want to create the class:<br>{{subject.alias}} <i class="fa fa-fw" ng-class=arrowClass></i> {{property.alias}} <i class="fa fa-fw" ng-class=arrowClass></i> <b>{{selected.$label}}</b> ?</div><button class="btn btn-primary" ng-click=ok()>Create Class</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div></div></div></div>'),e.put("/modules/workspace/modals/castProperty.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h1 class="modal-title h4">Cast Type of {{property.alias}}</h1></div><div class=modal-body><h2 class=h5>Available types for casting:</h2><div class=list-group><a class=list-group-item ng-class="(selected === type)?\'active\':\'\'" ng-repeat="type in availableCasts" ng-click=select(type)>{{ type | translate }}</a></div><div ng-if=selected>Do you want to create to cast {{property.alias}} to {{selected | translate}}?</div></div><div class=modal-footer><button class="btn btn-primary" ng-click=ok()>Cast</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div></div></div></div>'),e.put("/modules/workspace/modals/findRelationModal.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h1 class="modal-title h4">Possible relations between {{subject1}} and {{subject2}}</h1><div class=input-group style="padding-top: 10px;width:100%"><input class=form-control placeholder="Filter available properties" ng-model=search.$></div></div><div class=modal-body style="max-height: 350px; overflow-y: scroll"><div ng-repeat="(idx,subject) in subjects track by $index" ng-if="(!dontShowSecond || idx === 0) && subject.$availableProperties.length > 0"><div class=list-group><h2 ng-if="idx === 0" class=h5>{{subject1}} -> ??? -> {{subject2}}</h2><h2 ng-if="idx === 1" class=h5>{{subject2}} -> ??? -> {{subject1}}</h2><a class=list-group-item ng-class="(selected === property && fromIDX === idx)?\'active\':\'\'" ng-repeat="property in subject.$availableProperties | filter : search" ng-click=select(property,idx)><popover-wrap ng-if=property.$comment data-settings="{ class: \'fa fa-fw fa-info-circle pull-right\', content: property.$comment }"></popover-wrap>{{ property.$label }} <small>({{property.uri | replaceURIsWithPrefixes}})</small></a></div></div></div><div class=modal-footer><div ng-if=selected class="pull-left text-left">Do you want to create the property:<br>{{subjects[fromIDX].alias}} -> <b>{{selected.$label }}</b> -> {{subjects[toIDX].alias}}?</div><button class="btn btn-primary" ng-click=ok()>Create Property</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div></div></div></div>'),e.put("/modules/workspace/property/property.tpl.html",'<div class=property-container ng-class="property.filterExists ? \'\' : \'notExists\'" id={{$id}}><div class=property-head><span class="pull-right icon-list"><i class="fa fa-square-o fa-fw" ng-if=!property.filterExists ng-click="vm.toggle(\'filterExists\')"></i> <i class="fa fa-fw fa-question-circle" ng-if="property.filterExists && property.optional" ng-click="vm.toggle(\'optional\')"></i> <i class="fa fa-fw fa-eye-slash" ng-if=!property.view ng-click="vm.toggle(\'view\')"></i><popover-wrap ng-if=property.$comment data-settings="{ class: \'fa fa-fw fa-info-circle hidden-print\', content: property.$comment }"></popover-wrap><i class="fa fa-fw fa-ellipsis-h hidden-print" data-container=body bs-dropdown=vm.dropdownConfig bs-model=property></i></span> <b><span class=h5><b>{{property.alias}} <span ng-if="property.type === \'INVERSE_PROPERTY\'" class=text-danger>&#x207b;&#x00b9;</span></b></span> <i class="fa fa-edit pointer hidden-print" ng-click="vm.editAlias = true"></i> <small><small>({{ ::property.uri | replaceURIsWithPrefixes}})</small></small></b><div class="input-group hidden-print" ng-show=vm.editAlias><input size=30 maxlength=40 class=form-control placeholder=Alias ng-model=property.alias><div class=input-group-btn><button class="btn btn-success" ng-click="vm.editAlias = false"><i class="fa fa-check-square-o"></i></button></div></div><div class=clearfix></div></div><div ng-if="property.filterExists && property.hasFilter" ng-switch on=property.type><div ng-switch-when=AGGREGATE_PROPERTY aggregate-property-dir property=property></div><div ng-switch-when=OBJECT_PROPERTY object-property-dir property=property></div><div ng-switch-when=NUMBER_PROPERTY number-property-dir property=property></div><div ng-switch-when=STRING_PROPERTY string-property-dir property=property hide-language="property.uri === \'$$uri\'"></div><div ng-switch-when=STANDARD_PROPERTY string-property-dir property=property hide-language="property.uri === \'$$uri\'"></div><div ng-switch-when=INVERSE_PROPERTY object-property-dir property=property></div><div ng-switch-when=DATE_PROPERTY date-property-dir property=property></div><div ng-switch-default></div></div></div>'),e.put("/modules/workspace/propertyType/aggregate.tpl.html",'<div class=property-body><select ng-model=property.linkTo ng-options="x as x.alias for x in vm.availableProperties | aggregatePropertyFilter : property.restrictTo"><option value="">Choose a Property</option></select></div>'),e.put("/modules/workspace/propertyType/date.tpl.html",'<div class=property-body on-before-print="printed = true" on-after-print="printed = false"><div ng-if=!printed><div class="input-group input-group-sm"><div class="input-group-btn dropdown" is-open=status.isopen><button type=button class="btn btn-default dropdown-toggle" bs-dropdown=vm.dropdown>{{ vm.getDateComparisonLabel(vm.dateComparison) | translate}} <span class=caret></span></button></div><input class=form-control ng-model=vm.comparisonInput name=date data-date-format=yyyy-MM-dd bs-datepicker></div></div><small ng-if=printed>{{ vm.getDateComparisonLabel(vm.dateComparison) | translate}} "{{vm.comparisonInput | date:\'yyyy-MM-dd\' }}"</small></div>'),e.put("/modules/workspace/propertyType/number.tpl.html",'<div class=property-body on-before-print="printed = true" on-after-print="printed = false"><div ng-if=!printed><div class="input-group input-group-sm"><div class=input-group-addon>{{\'ARITHMETICS\' | translate}}</div><input class=form-control ng-model=vm.numberArithmetic limit-input="[^\\-\\*\\/\\.\\+()\\d xe]"></div><div class="input-group input-group-sm" style="margin-top: 5px"><div class=input-group-addon>{{\'COMPARISON\' | translate}}</div><input class=form-control ng-model=vm.numberComparison limit-input="[^\\-\\*\\/\\.\\+()><=!\\d xye]"></div></div><small ng-if=printed><span ng-if="vm.numberComparison !== \'y\'">If {{vm.numberComparison}}<br>with: y = {{vm.numberArithmetic | replace : {x: property.alias} }}</span> <span ng-if="vm.numberComparison === \'y\' && vm.numberArithmetic !== \'x\'">as: {{vm.numberArithmetic | replace : {x: property.alias} }}</span></small></div>'),e.put("/modules/workspace/propertyType/object.tpl.html",'<div on-before-print="printed = true" on-after-print="printed = false"><div ng-if=!printed class=property-body><div class="input-group input-group-sm" ng-show="vm.filtered.length > 0"><div class=input-group-addon>{{\'A_LINK_TO\' | translate}}</div><select ng-model=property.linkTo class="form-control input-sm" ng-options="x as x.alias for x in vm.filtered = (vm.subjects | objectPropertyFilter : \'$classURIs\' : property.$range)" title="Link with a subject"><option value="">{{\'LINK_WITH_SUBJECT\' | translate}}</option></select><div class=input-group-addon>{{\'EXISTS\' | translate}}</div></div><div ng-show="vm.filtered.length === 0"><div class="btn btn-sm btn-warning btn-block" ng-click=property.$addAppropriateClass()><i class="fa fa-fw fa-plug"></i> {{"ADD_APPROPRIATE_CLASS" | translate}}</div></div></div></div>'),e.put("/modules/workspace/propertyType/string.tpl.html",'<div class=property-body on-before-print="printed = true" on-after-print="printed = false"><div ng-if=!printed><div class="input-group input-group-sm"><div class=input-group-addon>{{\'COMPARISON\' | translate}}</div><div class="input-group-btn dropdown" is-open=dd2.isopen><button type=button class="btn btn-default" bs-dropdown=vm.dropdown style="border-radius: 0;border-right: 0">{{vm.getStringComparisonLabel() | translate}} <span class=caret></span></button></div><input ng-disabled="vm.stringComparison === null" class="form-control input-sm" ng-model=vm.comparisonInput> <span ng-show=vm.showFlags class=input-group-btn style=width:0></span> <input ng-show=vm.showFlags class="form-control input-sm" ng-model=vm.comparisonRegexFlags style="border-left:0"></div><div class="input-group input-group-sm" style="margin-top: 5px" ng-if=!hideLanguageFilter><div class=input-group-addon>{{\'LANGUAGE\' | translate}}</div><select ng-model=vm.selectedLanguage ng-options="x as x for x in vm.availableLanguages" title="Select Language" class="form-control input-sm"><option value="">{{\'SELECT_LANGUAGE\' | translate}}</option></select></div></div><small ng-if=printed><span ng-if="vm.stringComparison !== null">{{ vm.getStringComparisonLabel(vm.stringComparison) | translate}} "{{vm.comparisonInput }}" <span ng-if=vm.selectedLanguage>&</span></span> <span ng-if=vm.selectedLanguage>is in the language"{{vm.selectedLanguage }}"</span></small></div>'),e.put("/modules/workspace/subject/popoverWrap.tpl.html",'<span><i class=hide-while-dragging ng-class="settings.class + \' \' + conditionalClass" ng-click=click() data-trigger=hover data-type=success data-container=body data-html=true data-content=" {{settings.content | translate}}" bs-popover></i> <i class=show-while-dragging ng-class="settings.class + \' \' + conditionalClass"></i></span>'),e.put("/modules/workspace/subject/subject.tpl.html",'<div class=subject-container id="{{ ::$id }}"><div class=subject-head><p><span class="pull-right icon-list"><span class=mover><i class="fa fa-fw fa-arrows"></i></span><popover-wrap ng-if=subject.$comment data-settings="{ class: \'fa fa-fw fa-info-circle hidden-print\', content: subject.$comment }"></popover-wrap><popover-wrap data-click="subject.view = !subject.view" data-settings="{ class: \'fa fa-fw\', content: (subject.view)?\'HIDE_SUBJECT\':\'SHOW_SUBJECT\' }" data-conditional-class="{{(subject.view)?\'fa-eye hidden-print\':\'fa-eye-slash\' }}"></popover-wrap><popover-wrap data-click=vm.searchRelation() data-settings="{ class: \'fa fa-fw fa-plug hidden-print\', content: \'CONNECT_SUBJECT\' }" data-conditional-class="{{(subject.$searchRelation)?\'text-info\':\'\' }}"></popover-wrap><popover-wrap data-click=vm.removeSubject() data-settings="{ class: \'fa fa-fw fa-trash-o hidden-print\', content: \'DELETE_SUBJECT\' }"></popover-wrap></span> <b><span class=h4>{{subject.alias}}</span> <i class="fa fa-edit pointer hidden-print" ng-click="vm.editAlias = !vm.editAlias"></i> <small><small>({{ ::subject.uri | replaceURIsWithPrefixes}})</small></small></b></p><div class="input-group pull-left hidden-print" ng-show=vm.editAlias><input size=30 maxlength=40 class=form-control placeholder=Alias ng-model=subject.alias> <span class="btn input-group-addon btn-success" ng-click="vm.editAlias = false"><i class="fa fa-check-square-o"></i></span></div><div class=clearfix></div></div><div class=subjectBody><property-dir property=property ng-repeat="property in subject.$selectedProperties track by property.$id"></property-dir></div><div class=subject-footer><div ng-if=!vm.showAddProperty class="text-center hidden-print"><div class="btn btn-sm btn-success" ng-click="vm.showAddProperty = true"><span class="fa fa-plus"></span> {{\'PROPERTY\' | translate }}</div></div><div ng-if=vm.showAddProperty class=hidden-print><div ng-if=vm.loading class="btn btn-success btn-sm"><i class="fa fa-spinner fa-spin"></i> {{ \'PROPERTIES_LOADING\' | translate }}</div><div ng-if=!vm.loading><div ng-if="vm.totalItems === 0" class="btn btn-success btn-sm"><i class="fa fa-exclamation-triangle"></i> {{ \'NO_PROPERTIES_FOUND\' | translate }}</div><div class=input-group ng-if="vm.totalItems > 0"><ui-select ng-model=vm.propertySelected append-to-body=true><ui-select-match allow-clear=true placeholder="{{ \'CHOOSE_A_PROPERTY\' | translate }}">{{$select.selected.$label}}</ui-select-match><ui-select-choices repeat="item in vm.$availableProperties" group-by="\'type\'" refresh=vm.refreshProperties($select.search,50) refresh-delay=0 total-items={{vm.totalItems}} matching-items={{vm.matchingItems}} footer-zero=PROPERTIES_FOUND_ZERO footer-no-search=PROPERTIES_FOUND_NO_SEARCH footer-found=PROPERTIES_FOUND_X><ui-select-choices-row-inner></ui-select-choices-row-inner></ui-select-choices></ui-select><span class=input-group-btn><button ng-click=vm.addProperty() class="btn btn-success"><span class="fa fa-plus"></span></button></span></div></div></div></div></div>'),e.put("/bower_components/angular-strap/src/alert/alert.tpl.html","<div class=alert ng-class=\"[type ? 'alert-' + type : null]\"><button type=button class=close ng-if=dismissable ng-click=$hide()>&times;</button> <strong ng-bind=title></strong>&nbsp;<span ng-bind-html=content></span></div>"),e.put("/bower_components/angular-strap/src/aside/aside.tpl.html",'<div class=aside tabindex=-1 role=dialog><div class=aside-dialog><div class=aside-content><div class=aside-header ng-show=title><button type=button class=close ng-click=$hide()>&times;</button><h4 class=aside-title ng-bind=title></h4></div><div class=aside-body ng-bind=content></div><div class=aside-footer><button type=button class="btn btn-default" ng-click=$hide()>Close</button></div></div></div></div>'),e.put("/bower_components/angular-strap/src/datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click=$selectPane(-1)><i class={{$iconLeft}}></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex=-1 type=button class="btn btn-default btn-block text-strong" ng-click=$toggleMode()><strong style="text-transform: capitalize" ng-bind=title></strong></button></th><th><button tabindex=-1 type=button class="btn btn-default pull-right" ng-click=$selectPane(+1)><i class={{$iconRight}}></i></button></th></tr><tr ng-if=showLabels ng-bind-html=labels></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class=text-center ng-repeat="(j, el) in row"><button tabindex=-1 type=button class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click=$select(el.date) ng-disabled=el.disabled><span ng-class="{\'text-muted\': el.muted}" ng-bind=el.label></span></button></td></tr></tbody></table></div>'),e.put("/bower_components/angular-strap/src/dropdown/dropdown.tpl.html",'<ul tabindex=-1 class=dropdown-menu role=menu><li role=presentation ng-class="{divider: item.divider}" ng-repeat="item in content"><a role=menuitem tabindex=-1 ng-href={{item.href}} ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind=item.text></a> <a role=menuitem tabindex=-1 href=javascript:void(0) ng-if="!item.divider && item.click" ng-click=$eval(item.click);$hide() ng-bind=item.text></a></li></ul>'),e.put("/bower_components/angular-strap/src/modal/modal.tpl.html",'<div class=modal tabindex=-1 role=dialog aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header ng-show=title><button type=button class=close aria-label=Close ng-click=$hide()><span aria-hidden=true>&times;</span></button><h4 class=modal-title ng-bind=title></h4></div><div class=modal-body ng-bind=content></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=$hide()>Close</button></div></div></div></div>'),e.put("/bower_components/angular-strap/src/popover/popover.tpl.html","<div class=popover><div class=arrow></div><h3 class=popover-title ng-bind=title ng-show=title></h3><div class=popover-content ng-bind=content></div></div>"),e.put("/bower_components/angular-strap/src/select/select.tpl.html",'<ul tabindex=-1 class="select dropdown-menu" ng-show=$isVisible() role=select><li ng-if=$showAllNoneButtons><div class=btn-group style="margin-bottom: 5px; margin-left: 5px"><button type=button class="btn btn-default btn-xs" ng-click=$selectAll()>{{$allText}}</button> <button type=button class="btn btn-default btn-xs" ng-click=$selectNone()>{{$noneText}}</button></div></li><li role=presentation ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role=menuitem tabindex=-1 ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind=match.label></span></a></li></ul>'),e.put("/bower_components/angular-strap/src/tab/tab.tpl.html",'<ul class=nav ng-class=$navClass role=tablist><li role=presentation ng-repeat="$pane in $panes track by $index" ng-class="[ $isActive($pane, $index) ? $activeClass : \'\', $pane.disabled ? \'disabled\' : \'\' ]"><a role=tab data-toggle=tab ng-click="!$pane.disabled && $setActive($pane.name || $index)" data-index="{{ $index }}" ng-bind-html=$pane.title aria-controls=$pane.title></a></li></ul><div ng-transclude class=tab-content></div>'),
e.put("/bower_components/angular-strap/src/timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height=100%><thead><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button ng-if=showSeconds tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(-1, 2)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class=text-center><button tabindex=-1 style="width: 100%" type=button class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled=row[0].disabled><span ng-class="{\'text-muted\': row[0].muted}" ng-bind=row[0].label></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class=text-center><button tabindex=-1 ng-if=row[1].date style="width: 100%" type=button class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled=row[1].disabled><span ng-class="{\'text-muted\': row[1].muted}" ng-bind=row[1].label></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class=text-center><button tabindex=-1 ng-if="showSeconds && row[2].date" style="width: 100%" type=button class="btn btn-default" ng-class="{\'btn-primary\': row[2].selected}" ng-click="$select(row[2].date, 2)" ng-disabled=row[2].disabled><span ng-class="{\'text-muted\': row[2].muted}" ng-bind=row[2].label></span></button></td><td ng-if=showAM>&nbsp;</td><td ng-if=showAM><button tabindex=-1 ng-show="i == midIndex - !isAM * 1" style="width: 100%" type=button ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click=$switchMeridian() ng-disabled=el.disabled>AM</button> <button tabindex=-1 ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type=button ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click=$switchMeridian() ng-disabled=el.disabled>PM</button></td></tr></tbody><tfoot><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button ng-if=showSeconds tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(1, 2)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>'),e.put("/bower_components/angular-strap/src/tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show=title><div class=tooltip-arrow></div><div class=tooltip-inner ng-bind=title></div></div>'),e.put("/bower_components/angular-strap/src/typeahead/typeahead.tpl.html",'<ul tabindex=-1 class="typeahead dropdown-menu" ng-show=$isVisible() role=select><li role=presentation ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role=menuitem tabindex=-1 ng-click="$select($index, $event)" ng-bind=match.label></a></li></ul>'),e.put("/components/angular-strap-patches/src/dropdown/dropdown.tpl.html",'<ul tabindex=-1 class=dropdown-menu role=menu ng-controller="DropdownCtrl as vm"><li role=presentation ng-repeat="item in content" ng-class="{divider: item.divider}" ng-click=vm.execute(item) ng-hide=vm.hide(item) ng-show=vm.show(item)><a ng-if=item.template compile=item.template></a> <a ng-if="item.templateArray && !vm.model[item.field]" compile=item.templateArray[0]></a> <a ng-if="item.templateArray && vm.model[item.field]" compile=item.templateArray[1]></a></li></ul>')}]),function(){"use strict";angular.module("zenubu.ngStrap.modal",["mgcrea.ngStrap.modal","ngSanitize"]).config(["$modalProvider",function(e){angular.extend(e.defaults,{html:!0})}]).config(["$provide",function(e){e.decorator("$modal",["$controller","$delegate","$injector","$q","$rootScope",function(e,t,r,n,a){function i(e){o=n.defer();var r=t(e);r.dismiss=function(e){o.reject(e)};var a=r.hide;return r.hide=function(){a(),r.destroy()},r.close=function(e){o.resolve(e)},r.result=o.promise.then(function(e){return r.hide(),e})["catch"](function(e){return r.hide(),n.reject(e)}),r}function s(t){var s,l,c=[],u=_.omit(t,["controller","controllerAs","resolve"]),p=u.scope||a;return t.resolve&&(c=_.map(t.resolve,function(e){return r.invoke(e)})),t.controller&&(l=n.all(c).then(function(r){var n={},a=0;_.forEach(t.resolve,function(e,t){n[t]=r[a++]}),p=p.$new(),n.$scope=p,n.$modalInstance={},n.$modalInstance.dismiss=function(e){o.reject(e)},n.$modalInstance.close=function(e){o.resolve(e)},s=e(t.controller,n),t.controllerAs&&(p[t.controllerAs]=s)})),l.then(function(){return _.assign(u,{scope:p}),i(u)})}var o;return i.open=s,i}])}])}(),function(){"use strict";function e(e){return function(t,r,n){t.$watch(function(e){return e.$eval(n.compile)},function(n){r.html(n),e(r.contents())(t)})}}function t(e){e.decorator("bsDropdownDirective",["$delegate",function(e){var t=e[0],r=t.link,n=function(e,t,n,a){r(e,t,n,a),e.$watchCollection(n.bsModel,function(t){e.bsModel=t},!0)};return t.compile=function(){return n},e}])}function r(e){function t(e){"function"==typeof e.click&&e.click(a.model,e.field)}function r(e){return"function"==typeof e.hide?e.hide(a.model,e.field):e.hasOwnProperty("hide")?a.model[e.field]===e.hide:!1}function n(e){return"function"==typeof e.show?e.show(a.model,e.field):e.hasOwnProperty("show")?a.model[e.show]===e.show:!0}var a=this;a.model=e.bsModel,a.execute=t,a.hide=r,a.show=n}angular.module("zenubu.ngStrap.dropdown",["mgcrea.ngStrap.dropdown","ngSanitize"]).config(["$dropdownProvider",function(e){angular.extend(e.defaults,{html:!0,placement:"bottom",templateUrl:"/components/angular-strap-patches/src/dropdown/dropdown.tpl.html",container:"body"})}]).controller("DropdownCtrl",r).config(t).directive("compile",e),e.$inject=["$compile"],t.$inject=["$provide"],r.$inject=["$scope"]}(),function(){"use strict";function e(e){angular.extend(e.defaults,{iconLeft:"fa fa-fw fa-chevron-left",iconRight:"fa fa-fw fa-chevron-right"}),angular.extend(e.defaults,r())}function t(e){e.decorator("$dateFormatter",["$delegate",function(e){var t=e;t.getDefaultLocale=function(){return moment.locale()},t.weekdaysShort=function(){return moment.weekdaysShort()};var n=t.formatDate;return t.formatDate=function(e,t,a){return _.contains(r(),t)?moment(e.toISOString()).format(t):n(e,t,a)},t}])}function r(){return{dayFormat:"DD",monthTitleFormat:"MMMM YYYY",monthFormat:"MMM",yearFormat:"YYYY",yearTitleFormat:"YYYY"}}angular.module("zenubu.ngStrap.datepicker",["mgcrea.ngStrap.datepicker","mgcrea.ngStrap.helpers.dateFormatter"]).config(t).config(e),e.$inject=["$datepickerProvider"],t.$inject=["$provide"]}(),function(){"use strict";function e(e,n,a,i){return{restrict:"E",replace:!0,scope:{subject:"="},controller:t,controllerAs:"vm",templateUrl:"/modules/workspace/subject/subject.tpl.html",link:r(e,n,a,i)}}function t(e,t,r,n){function a(){o.addProperty(l.propertySelected),l.propertySelected=void 0,l.showAddProperty=!1}function i(){r.removeSubject(o.$id)}function s(){o.$searchRelation=!0,r.searchRelation(o)}var o=e.subject,l=this;l.editAlias=!1,l.comment=o.uri+".$comment",l.removeSubject=i,l.addProperty=a,l.searchRelation=s,l.$availableProperties=[],l.loading=!0,t.when(o.$loading).then(function(){l.loading=!1,l.refreshProperties("",50)}),n.$on("translateEverything",function(){l.showAddProperty&&l.refreshProperties("",50)}),l.refreshProperties=function(e,t){return o.getAvailableProperties(e,t).then(function(e){var t=_.xor(_.pluck(e.items,"uri"),_.pluck(l.$availableProperties,"uri"));t.length>0&&(l.$availableProperties=e.items,l.totalItems=e.total,l.matchingItems=e.matching)})}}function r(e,t,r,n){return function(a,i){var s=angular.copy(a.subject.pos),o=s.x||150,l=s.y||250;i.css({left:o+"px",top:l+"px"}),n.$on("moveSubjectDrag",function(e,t,r){o+=t.x,l+=t.y,i.css({left:o+"px",top:l+"px"}),r&&(a.subject.pos.x=angular.copy(o),a.subject.pos.y=angular.copy(l))}),n.$on("moveSubjectEnd",function(){a.subject.pos.x=angular.copy(o),a.subject.pos.y=angular.copy(l)}),r.registerSubject(a.$id,i),e.makeDraggable(i,{containment:"parent",handle:".mover",start:function(){a.$evalAsync(function(){r.increaseIndex(a.$id),a.vm.showAddProperty=!1,t.recalculateOffsets(a.subject.$id)})},drag:function(){t.recalculateOffsets(a.subject.$id,!0)},stop:function(e,t){o=angular.copy(t.position.left),l=angular.copy(t.position.top),a.$evalAsync(function(){a.subject.pos.x=angular.copy(o),a.subject.pos.y=angular.copy(l)})}}),t.addMapping(a.subject.$id,a.$id)}}angular.module("VSB.subject.instance",["VSB.config","VSB.endPointService","VSB.arrowService","VSB.filters"]).directive("subjectDir",e),e.$inject=["ArrowService","connectionService","zIndexService","$rootScope"],t.$inject=["$scope","$q","SubjectService","$rootScope"]}(),function(){"use strict";angular.module("VSB.subject",["VSB.subject.model","VSB.subject.service","VSB.subject.instance","VSB.property"])}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,require:"?^ngClick",scope:{settings:"=",click:"&",conditionalClass:"@"},templateUrl:"/modules/workspace/subject/popoverWrap.tpl.html"}}function t(e,t,r,n,a,i,s,o,l,c,u){function p(){return C}function d(e){if(_.isObject(e))if(C.push(e),1===C.length){u.dismiss(I);var t={alias:'"'+C[0].alias+'"'};I=u.addMessage({message:"<span translate='SEARCH_RELATION' translate-values='"+JSON.stringify(t)+"'></span>","class":"info",dismiss:f,icon:"info-circle"})}else o.open({templateUrl:"/modules/workspace/modals/findRelationModal.tpl.html",controller:"findRelationModalCtrl",controllerAs:"foo",resolve:{subjects:function(){return C},possibleRelations:["EndPointService",function(e){return e.getPossibleRelations(C[0].uri,C[1].uri)}]}}).then(function(e){return e.result}).then(f,f)}function f(){_.forEach(C,function(e){e.$searchRelation=!1}),C=[],I=u.dismiss(I,!0)}function g(){var e=r.getGroups(!0),t=_.isEmpty(A.mainSubject)?null:angular.copy(A.mainSubject.$id),n=_.keys(e),a=A.groups;A.groups=_.filter(A.subjects,function(e){return _.contains(n,e.$id)});var i=null;if(null!==t&&!_.contains(n,t)){var s=_.findKey(e,function(e){return _.contains(e,t)});i=_.find(A.groups,{$id:s})}1===A.groups.length&&(i=A.groups[0]),_.isObject(i)&&i.$id!==t&&A.redrawMainConnection(i),_.xor(a,A.groups).length>0&&c.$emit("availableGroupsChanged")}function m(e){var t=_.where(A.subjects,{alias:e.linkTo});t.length>0&&(e.linkTo=t[0])}function h(e){var t=_.where(A.subjects,{alias:e})[0];A.redrawMainConnection(t)}function b(){return A.mainSubject}function v(){return A.subjects}function y(e,t){return l.getFromCache("availableClasses").then(function(r){return n.filterByTokenStringWithLimit(r,e,t)})}function S(e){var t={uri:e,$classURIs:[e]};return E(t)}function E(r){t.debug("SUBJECT added "+r.uri,r),r.pos=r.pos?r.pos:R(),r.alias=T(r.alias,r.$label,r.uri);var n=new e(r);return A.subjects.push(n),g(),n}function $(e){return r.remove(e).then(function(){_.remove(A.subjects,{$id:e}),0===A.subjects.length&&w()})}function w(){var e=[];return A.subjects.forEach(function(t){e.push($(t.$id).then(function(){l.removeFromCache(t.$id)}))}),i.all(e).then(function(){A.mainSubject=null,A.groups=[],t.debug("Workspace reset")})}function T(e,t,r){e||(e=t),e||(e=s.instant(r+".$label")),e=_.trunc(e,35);for(var n=e,a=1;!F(n);)n=e+" "+a,a+=1;return n}function F(e){return 0===_.filter(A.subjects,{alias:e}).length}function R(){var e=150+40*O;return O=(O+1)%5,{x:e+k,y:e}}var A={};A.subjects=[],A.mainSubject=null,A.groups=[];var C=[];A.addSubjectByURI=S,A.addSubject=E,A.removeSubject=$,A.isAliasUnique=F,A.reset=w,A.getAvailableClasses=y,A.getMainSubject=b,A.getSubjects=v,A.getSearchRelationSubjects=p,A.getSubjectById=function(e){return _.where(A.subjects,{$id:e})[0]},A.setMainSubjectWithAlias=h,A.linkSubjectWithProperty=m,A.refreshGroups=g;var P=null;A.redrawMainConnection=function(e){if(_.isObject(e)){var t=r.connect("startpoint",e.$id,"Start").then(function(){P=null,A.mainSubject=e,c.$emit("mainSubjectChanged")});null===P?P=t:P.cancel().then(function(){return t})}},A.searchRelation=d;var I;c.$on("connectionGroupsChanged",g),A.loading=a.getAvailableClasses()["catch"](function(e){t.error("An error occurred while loading available Classes: ",e);var r="<span> An error occured while loading available classes <br>"+_.escape(e)+"</span>";u.addMessage({message:r,icon:"times-circle-o","class":"danger"})}).then(function(e){if(t.debug("Classes loaded ",e),0===e.length){var r="<span>Your endpoint returned zero classes</span>";u.addMessage({message:r,icon:"times-circle-o","class":"danger"})}return l.putInCache("availableClasses","class",e)}).then(function(){A.loading=!1});var O=0,k=0;return c.$on("mainOffset",function(e,t){k=t?200:0}),A}angular.module("VSB.subject.service",["VSB.endPointService","VSB.language","VSB.subject.model","VSB.arrowService"]).factory("SubjectService",t).directive("popoverWrap",e),t.$inject=["Subject","$log","connectionService","helperFunctions","EndPointService","$q","$translate","$modal","translationCacheService","$rootScope","MessageService"]}(),function(){"use strict";function e(e,t,r,n,a,i,s,o,l,c){return function(u){function p(e){e.$subject={uri:h.uri,$id:h.$id},e.alias=d(e.alias,e.$label,e.uri);var t=new i(e);return h.$selectedProperties.push(t),s.recalculateOffsets(h.$id),t}function d(e,t,n){e||(e=t),e||(e=r.instant(n+".$label")),e=_.trunc(e,35);for(var a=e,i=1;!f(a);)a=e+" "+i,i+=1;return a}function f(e){return 0===_.filter(h.$selectedProperties,{alias:e}).length}function g(e){s.remove(e).then(function(){_.remove(h.$selectedProperties,{$id:e})})}function m(e,t){var r={pre:function(e,t){if(!_.isArray(e)||!_.isString(t)||_.isEmpty(t))return{};var r=_(e).pluck("type").uniq().map(function(e){return e.toLowerCase().replace("_property","")}).value(),n=new RegExp(":("+_.map(r,_.escapeRegExp).join("|")+")(?=\\s+|$)","ig");if(!t.match(n))return{};var a=_.words(t,n)[0].toUpperCase().replace(":","")+"_PROPERTY";return{array:_.where(e,{type:a}),filter:t.replace(n,"")}}};return o.getFromCache(h.$id).then(function(a){return n.filterByTokenStringWithLimit(a,e,t,r)})}var h={uri:null,pos:{},view:!0,$classURIs:[],$id:null,$selectedProperties:[]};_.extend(h,u),h.$id=s.generateID(),s.addSubject(h.$id),h.getAvailableProperties=m,h.addProperty=p,h.removeProperty=g,e.getSuperAndEqClasses(h.uri).then(function(e){t.debug("SUBJECT Additional Classes loaded for "+h.uri,e),h.$classURIs=e})["catch"](function(e){t.error(e)});var b=e.getDirectProperties(h.uri)["catch"](function(e){var r="<span> An error occured while loading direct properties for "+h.uri+"<br>"+_.escape(e)+"</span>";return l.addMessage({message:r,icon:"times-circle-o","class":"danger"}),t.error("PROPERTIES (direct) loaded for "+h.uri,"An error occurred: ",e),[]}),v=e.getInverseProperties(h.uri)["catch"](function(e){var r="<span> An error occured while loading indirect properties for "+h.uri+"<br>"+_.escape(e)+"</span>";return l.addMessage({message:r,icon:"times-circle-o","class":"danger"}),t.error("An error occurred: ",e),[]});h.$loading=a.all([b,v]).then(function(e){e=_.flatten(e),o.putInCache(h.$id,"property",e)});var y=null;return c.$on("$translateChangeSuccess",function(e,t){if(!h.$label||y!==t.language){var n=h.uri+".$comment",a=h.uri+".$label";r([n,a]).then(function(e){a!==e[a]&&(y=t.language,h.$label=e[a],h.$comment=n!==e[n]?e[n]:!1)})}}),h}}angular.module("VSB.subject.model",["VSB.endPointService","pascalprecht.translate","VSB.connectionService"]).factory("Subject",e),e.$inject=["EndPointService","$log","$translate","helperFunctions","$q","Property","connectionService","translationCacheService","MessageService","$rootScope"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!0,controller:t,controllerAs:"vm",scope:{property:"=",hideLanguageFilter:"=hideLanguage"},templateUrl:"/modules/workspace/propertyType/string.tpl.html"}}function t(e,t){function r(e,t,r){return null===t||void 0===t||""===t||void 0===e||null===e?(a.compare=null,void n()):(a.compare=i.allowedStringComparisons[e].f.replace(/%input%/,t).replace(/%flags%/,r),void n())}function n(){a.compareRaw.selectedLanguage=i.selectedLanguage,null!==i.selectedLanguage&&void 0!==i.selectedLanguage&&""!==i.selectedLanguage&&(a.compare=null===a.compare||void 0===a.compare?'langMatches(lang(%after_arithmetic%), "'+i.selectedLanguage+'")':'langMatches(lang(%after_arithmetic%), "'+i.selectedLanguage+'") && '+a.compare)}var a=e.property,i=this,s=angular.copy(a.compareRaw);i.allowedStringComparisons=[{label:"CONTAINS",f:'regex(%after_arithmetic%, "%input%", "i")',showFlags:!1},{label:"EQUALS",f:'(str(%after_arithmetic%)="%input%")',showFlags:!1},{label:"EQUALS_NOT",f:'(str(%after_arithmetic%)!="%input%")',showFlags:!1},{label:"STARTS_WITH",f:'regex(%after_arithmetic%, "^%input%", "i")',showFlags:!1},{label:"ENDS_WITH",f:'regex(%after_arithmetic%, "%input%$", "i")',showFlags:!1},{label:"REGEX",f:'regex(%after_arithmetic%, "%input%", "%flags%")',showFlags:!0}],i.dropdown=_.map(i.allowedStringComparisons,function(e,t){return{click:function(){i.changeStringComparison(t)},template:'{{ "'+e.label+'" | translate}}'}}),i.dropdown.unshift({click:function(){i.changeStringComparison(null)},template:'{{ "NO_COMPARISON" | translate }}'}),i.availableLanguages=t.languages.StringComparison,i.stringComparison=null,i.comparisonInput="",i.comparisonRegexFlags="i",i.selectedLanguage=null,i.getStringComparisonLabel=function(){return null===i.stringComparison?"NO_COMPARISON":i.allowedStringComparisons[i.stringComparison].label},i.changeStringComparison=function(e){i.stringComparison=e},null!==s&&void 0!==s&&(null!==s.selectedLanguage&&void 0!==s.selectedLanguage&&(i.selectedLanguage=s.selectedLanguage),null!==s.stringComparison&&void 0!==s.stringComparison&&(i.stringComparison=s.stringComparison),null!==s.comparisonInput&&void 0!==s.comparisonInput&&(i.comparisonInput=s.comparisonInput),null!==s.comparisonRegexFlags&&void 0!==s.comparisonRegexFlags&&(i.comparisonRegexFlags=s.comparisonRegexFlags)),e.$watch("vm.stringComparison",function(e){r(e,i.comparisonInput,i.comparisonRegexFlags),a.compareRaw.stringComparison=e,null!==e&&(i.showFlags=i.allowedStringComparisons[e].showFlags)}),e.$watch("vm.comparisonInput",function(e){a.compareRaw.comparisonInput=e,r(i.stringComparison,e,i.comparisonRegexFlags)}),e.$watch("vm.comparisonRegexFlags",function(e){a.compareRaw.comparisonRegexFlags=e,r(i.stringComparison,i.comparisonInput,e)}),e.$watch("vm.selectedLanguage",function(){n()})}angular.module("VSB.propertyType.string",["VSB.config"]).directive("stringPropertyDir",e),t.$inject=["$scope","globalConfig"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!0,scope:{property:"="},controllerAs:"vm",controller:t,templateUrl:"/modules/workspace/propertyType/object.tpl.html"}}function t(e,t,r){function n(e){a=e}var a=null,i=this,s=e.property,o="INVERSE_PROPERTY"===s.type;i.subjects=t.subjects;var l=angular.copy(s.$id);r.registerDestroyWatcher(s.$id,function(e){s.linkTo.$id.toString()===e.toString()&&(s.linkTo=void 0)}),e.$watch("property.alias",function(e){o&&(e=angular.copy(e)+""),r.updateConnectionLabel(a,e)}),e.$watch("property.linkTo",function(e){if(void 0!==e&&null!==e){var t=angular.copy(e.$id),a=o?s.alias+"":s.alias;r.connect(l,t,a).then(n)}else r.disconnect(l),n(null)}),e.$on("$destroy",function(){r.disconnect(l),n(null)})}function r(){return function(e,t,r){return null===t||void 0===t||"object"!=typeof r||0===r.length?e:e.filter(function(e){if(void 0===e[this.key])return!0;for(var t=0,r=this.filter.length;r>t;t++)if(-1!==e[this.key].indexOf(this.filter[t]))return!0;return!1},{key:t,filter:r})}}angular.module("VSB.propertyType.object",["VSB.arrowService","VSB.connectionService"]).directive("objectPropertyDir",e).filter("objectPropertyFilter",r),t.$inject=["$scope","SubjectService","connectionService"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!0,controller:t,controllerAs:"vm",scope:{property:"="},templateUrl:"/modules/workspace/propertyType/number.tpl.html"}}function t(e){var t=e.property,r=this,n=angular.copy(t.compareRaw);r.numberArithmetic="x",r.numberComparison="y",null!==n&&void 0!==n&&(null!==n.numberArithmetic&&void 0!==n.numberArithmetic&&(r.numberArithmetic=n.numberArithmetic),null!==n.numberComparison&&void 0!==n.numberComparison&&(r.numberComparison=n.numberComparison)),e.$watch("vm.numberArithmetic",function(e){(""===e||null===e||void 0===e)&&(e="x"),t.compareRaw.numberArithmetic=e,t.arithmetic="x"===e?null:e.replace(/x/g,"%before_arithmetic%")}),e.$watch("vm.numberComparison",function(e){(""===e||null===e||void 0===e)&&(e="y"),t.compareRaw.numberComparison=e,t.compare="x"===e||"y"===e?null:e.replace(/x/g,"%before_arithmetic%").replace(/y/g,"%after_arithmetic%")})}function r(){return{require:"ngModel",link:function(e,t,r,n){function a(e){return function(t){var r=new RegExp(e.limitInput,"g"),a=t.toLowerCase().replace(r,"");return a=a.replace(/\s+/g," "),a!==t&&(n.$setViewValue(a),n.$render()),a}}n.$parsers.push(a(r))}}}angular.module("VSB.propertyType.number",["VSB.config"]).directive("numberPropertyDir",e).filter("replace",function(){return function(e,t){return _.isString(e)&&_.isObject(t)?(_.forEach(t,function(t,r){e=e.replace(r,t)}),e):e}}).directive("limitInput",r),t.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!0,controller:t,controllerAs:"vm",scope:{property:"="},templateUrl:"/modules/workspace/propertyType/date.tpl.html"}}function t(e){function t(){if(null!==n.dateComparison&&n.comparisonInput instanceof Date){var e=n.comparisonInput;r.compare=n.allowedDateComparisons[n.dateComparison].f.replace(/%input_start_of_day%/g,moment(e).hour(0).minute(0).second(0).format()).replace(/%input_end_of_day%/g,moment(e).hour(23).minute(59).second(59).format())}else r.compare=null}var r=e.property,n=this;n.open=function(e){e.preventDefault(),e.stopPropagation(),n.opened=!0};var a=angular.copy(r.compareRaw);n.allowedDateComparisons=[{label:"EQUALS",f:'xsd:dateTime(%after_arithmetic%) >= "%input_start_of_day%"^^xsd:dateTime&& xsd:dateTime(%after_arithmetic%) <= "%input_end_of_day%"^^xsd:dateTime'},{label:"EQUALS_NOT",f:'xsd:dateTime(%after_arithmetic%) < "%input_start_of_day%"^^xsd:dateTime|| xsd:dateTime(%after_arithmetic%) > "%input_end_of_day%"^^xsd:dateTime'},{label:"AFTER",f:'xsd:dateTime(%after_arithmetic%) > "%input_end_of_day%"^^xsd:dateTime'},{label:"BEFORE",f:'xsd:dateTime(%after_arithmetic%) < "%input_start_of_day%"^^xsd:dateTime'}],n.dropdown=_.map(n.allowedDateComparisons,function(e,t){return{click:function(){n.changeDateComparison(t)},template:'{{ "'+e.label+'" | translate}}'}}),n.getDateComparisonLabel=function(e){return n.allowedDateComparisons[e].label},n.changeDateComparison=function(e){n.dateComparison=e},n.dateComparison=0,n.comparisonInput=new Date,null!==a&&void 0!==a&&(null!==a.dateComparison&&void 0!==a.dateComparison&&(n.dateComparison=a.dateComparison),null!==a.comparisonInput&&void 0!==a.comparisonInput&&(n.comparisonInput=new Date(a.comparisonInput))),e.$watch("vm.dateComparison",function(e){r.compareRaw.dateComparison=e,r.compare="",t()}),e.$watch("vm.comparisonInput",function(e){r.compareRaw.comparisonInput=e,r.compare="",t()})}angular.module("VSB.propertyType.date",["zenubu.ngStrap"]).directive("datePropertyDir",e),t.$inject=["$scope"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!0,scope:{property:"="},controllerAs:"vm",controller:t,templateUrl:"/modules/workspace/propertyType/aggregate.tpl.html"}}function t(e,t){var r=e.property,n=this;n.availableProperties=[],e.$watchCollection(function(){return t.getSubjectById(r.$subject.$id).$selectedProperties},function(e){n.availableProperties=_.reject(e,{type:"AGGREGATE_PROPERTY"})})}function r(){return function(e,t){return _.isEmpty(t)||(e=_.filter(e,{type:t})),e}}angular.module("VSB.propertyType.aggregate",[]).directive("aggregatePropertyDir",e).filter("aggregatePropertyFilter",r),t.$inject=["$scope","SubjectService"]}(),function(){"use strict";angular.module("VSB.propertyType",["VSB.propertyType.object","VSB.propertyType.aggregate","VSB.propertyType.number","VSB.propertyType.string","VSB.propertyType.date"])}(),function(){"use strict";function e(e,t,r,n,a,i){return function(s){var o={uri:null,type:null,filterExists:!0,hasFilter:!1,compareRaw:{},linkTo:null,view:!0,optional:!1,arithmetic:null,compare:null,$subject:{}};_.extend(o,s),o.$id=a.generateID(),a.addPropertyToSubject(o.$subject.$id,o.$id);var l=function(t){if(!_.isEmpty(t)){var r=angular.copy(t),a=[];return r.forEach(function(t){a.push(e.getSubAndEqClasses(t))}),n.all(a).then(function(e){e=_.uniq(_.flatten(e)),o.$range=e}).then(function(){o.typeCasted||"INVERSE_PROPERTY"===o.type||"AGGREGATE_PROPERTY"===o.type||(o.type=e.getPropertyType(o))})}};o.$copied?_.startsWith(o.uri,"$$")||e.getPropertyDetails(o.$subject.uri,o).then(function(e){return e=e[0],_.isEmpty(e)?null:(o.$range=e.$range,o.typeCasted||(o.type=e.type),e.$range)}).then(l)["catch"](function(e){t.error(e)}):l(o.$range);var c=null;return i.$on("$translateChangeSuccess",function(e,t){if(!o.$label||c!==t.language){var n=o.uri+".$comment",a=o.uri+".$label";r([n,a]).then(function(e){a!==e[a]&&(c=t.language,o.$label=e[a],o.$comment=n!==e[n]?e[n]:!1)})}}),o}}angular.module("VSB.property.model",["VSB.endPointService","pascalprecht.translate","VSB.connectionService"]).factory("Property",e),e.$inject=["EndPointService","$log","$translate","$q","connectionService","$rootScope"]}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{property:"="},controller:t,controllerAs:"vm",templateUrl:"/modules/workspace/property/property.tpl.html"}}function t(e,t,r,n){function a(){n.open({template:"/modules/workspace/modals/addAppropriateClass.tpl.html",controller:"addAppropriateClassCtrl",resolve:{subject:function(){return t.getSubjectById(o.$subject.$id)},property:function(){return o}}})}function i(){n.open({template:"/modules/workspace/modals/castProperty.tpl.html",controller:"castPropertyCtrl",resolve:{property:function(){return o}}})}function s(t){o.hasOwnProperty(t)&&(o[t]=angular.copy(!o[t]),e.$evalAsync(function(){r.recalculateOffsets(o.$subject.$id,!0)}))}var o=e.property;o.$addAppropriateClass=a,r.addMapping(o.$id,e.$id);var l=this;l.toggle=s,l.dropdownConfig=[{hide:function(){return!(o.filterExists&&o.hasFilter)},click:function(){s("hasFilter")},template:'<i class="fa fa-fw fa-filter"></i> {{"REMOVE_FILTER" | translate}}'},{hide:function(){return!(o.filterExists&&!o.hasFilter)},click:function(){s("hasFilter")},template:'<i class="fa fa-fw fa-filter"></i> {{"ADD_FILTER" | translate}}'},{field:"filterExists",click:function(){s("filterExists")},templateArray:['<i class="fa fa-fw fa-check-square-o"></i> {{ "EXISTS" | translate }}','<i class="fa fa-fw fa-square-o"></i> {{ "EXISTS_NOT" | translate }}']},{hide:function(){return!(o.filterExists&&o.optional)},click:function(){s("optional")},template:'<i class="fa fa-fw fa-exclamation-circle"></i> {{"IS_MANDATORY" | translate}}'},{hide:function(){return!(o.filterExists&&!o.optional)},click:function(){s("optional")},template:'<i class="fa fa-fw fa-question-circle"></i> {{"IS_OPTIONAL" | translate}}'},{field:"view",click:function(){s("view")},templateArray:['<i class="fa fa-fw fa-eye"></i> {{ "SHOW_PROPERTY" | translate }}','<i class="fa fa-fw fa-eye-slash"></i> {{ "HIDE_PROPERTY" | translate }}']},{hide:function(){return!("OBJECT_PROPERTY"===o.type||"INVERSE_PROPERTY"===o.type)},click:function(){a()},template:'<i class="fa fa-fw fa-plug"></i> {{"ADD_APPROPRIATE_CLASS" | translate}}'},{hide:function(){return!("OBJECT_PROPERTY"!==o.type&&"INVERSE_PROPERTY"!==o.type&&"AGGREGATE_PROPERTY"!==o.type)},click:function(){i()},template:'<i class="fa fa-fw fa-magic"></i> {{"CAST_PROPERTY" | translate}}'},{click:function(){l.removeProperty(o.$id)},template:'<i class="fa fa-fw fa-trash-o"></i> {{"DELETE_PROPERTY" | translate}}'}],l.editAlias=!1,l.removeProperty=function(n){t.getSubjectById(o.$subject.$id,!0).removeProperty(n),e.$evalAsync(function(){r.recalculateOffsets(o.$subject.$id,!0)})},e.$on("$destroy",function(){})}angular.module("VSB.property.instance",["VSB.config","VSB.filters","VSB.arrowService"]).directive("propertyDir",e),t.$inject=["$scope","SubjectService","connectionService","$modal"]}(),function(){"use strict";angular.module("VSB.property",["VSB.property.model","VSB.property.instance","VSB.propertyType"])}(),function(){"use strict";function e(e,t,r,n,a,i){e.property=t,e.subject=n,e.search={},e.availableSubjects=[],e.arrowClass="OBJECT_PROPERTY"===t.type?"fa-long-arrow-right":"fa-long-arrow-left",e.selected=null,e.select=function(t){e.selected=e.selected===t?null:t},e.ok=function(){if(null!==e.selected){var n=r.addSubjectByURI(angular.copy(e.selected.uri));t.hasFilter=!0,t.linkTo=n}a.dismiss()},e.cancel=a.dismiss,i.getFromCache("availableClasses").then(function(r){e.availableSubjects=_(r).filter(function(e){return _.contains(t.$range,e.uri)}).value()})}angular.module("VSB.modals",["zenubu.ngStrap","VSB.subject.service"]).controller("addAppropriateClassCtrl",e),e.$inject=["$scope","property","SubjectService","subject","$modalInstance","translationCacheService"]}(),function(){"use strict";function e(e,t,r,n,a){function i(e){return _(e.items).filter(function(e){return _.contains(r,e.uri)}).value()}e.search={},e.subjects=_.cloneDeep(t),e.subjects[0].$availableProperties=[],e.subjects[1].$availableProperties=[],t[0].getAvailableProperties(":relation",null).then(i).then(function(t){e.subjects[0].$availableProperties=t}),t[1].getAvailableProperties(":relation",null).then(i).then(function(t){e.subjects[1].$availableProperties=t}),e.subjects[0].$id===e.subjects[1].$id&&(e.dontShowSecond=!0),e.subject1=t[0].alias,e.subject2=t[1].alias,t[0].$searchRelation=!1,t[1].$searchRelation=!1,e.selected=null,e.fromIDX=null,e.select=function(t,r){e.selected===t&&e.fromIDX===r?(e.selected=null,e.fromIDX=null):(e.selected=t,e.fromIDX=r,e.toIDX=0===r?1:0)},e.ok=function(){if(null!==e.selected){var r=n.getSubjectById(t[e.fromIDX].$id),i=n.getSubjectById(t[e.toIDX].$id),s=angular.copy(e.selected);s.hasFilter=!0,s.linkTo=i,s.$copied=!0,r.addProperty(s)}a.dismiss()},e.cancel=a.dismiss}angular.module("VSB.modals").controller("findRelationModalCtrl",e),e.$inject=["$scope","subjects","possibleRelations","SubjectService","$modalInstance"]}(),function(){"use strict";function e(e,t,r){e.property=t,e.availableCasts=["DATE_PROPERTY","STRING_PROPERTY","NUMBER_PROPERTY"],e.selected=t.type,e.select=function(t){e.selected=e.selected===t?null:t},e.ok=function(){null!==e.selected&&(t.type=e.selected,t.compareRaw={},t.compare=null,t.typeCasted=!0),r.dismiss()},e.cancel=r.dismiss}angular.module("VSB.modals").controller("castPropertyCtrl",e),e.$inject=["$scope","property","$modalInstance"]}(),function(){"use strict";function e(){function e(e){var n=_.lastIndexOf(o,e);if(n!==o.length-1){o.push(e);var a=_.lastIndexOf(o,e);r(e,n,a),t()}}function t(){var e=_.uniq(o);o.length-e.length<3||(o=_(e).sortBy(function(e){return _.lastIndexOf(o,e)}).forEach(function(e,t){var n=_.lastIndexOf(o,e);r(e,n,t)}).value())}function r(e,t,r){_.forEach(l[e],function(n,a){return null===n._jsPlumb?void delete l[e][a]:(n.removeClass("z-index-"+t),void n.addClass("z-index-"+r))}),l[e]=_.compact(l[e]),c[e].removeClass("z-index-"+t),c[e].addClass("z-index-"+r)}function n(){o=[],l={}}function a(e){return-1===_.lastIndexOf(o,e)&&o.push(e),_.lastIndexOf(o,e)}function i(e,t){var r=a(e);t.addClass("z-index-"+r),c[e]=t}function s(e,t){var r=_.lastIndexOf(o,e);_.isArray(l[e])||(l[e]=[]),t.addClass("z-index-"+r),
l[e].push(t)}var o=[],l={},c={};return{increaseIndex:e,getSubjectIndex:a,registerSubject:i,registerEndpoint:s,reset:n}}angular.module("VSB.zIndex",["VSB.config"]).factory("zIndexService",e)}(),function(){"use strict";function e(e,t,r,n){function a(e){return p(e)}function i(e,r){t.updateConnectionLabel(e,r)}function s(){return b+=1,"i"+b}function o(e){return function(){_.forEach(_.invert(E,!0)[e],function(t){_.isFunction(w[t])&&w[t](e),delete E[t]}),delete w[e],delete y[e],delete v[e],delete S[e],p()}}function l(t){var r=[];return y.hasOwnProperty(t)?r=_.map(y[t],function(e){return c(e).then(o(e))}).push(c(t)):(r.push(c(t).then(o(t))),y=_.mapValues(y,function(e){return _.without(e,t)})),e.all(r).then(o(t))}function c(r){return e.when(g(r)).then(function(e){return t.deleteAllConnections(e)}).then(function(e){return delete E[r],p(),e})}function u(e,r,n){var a=[];return Promise.all([g(e),g(r),g(S[e])]).cancellable().then(function(t){return a=t,c(e)}).then(function(){return a[1]?(E[e]=r,p(),a[1]===a[2]?t.connectToSelf(a[0],a[2]):t.connect(a[0],a[1],n,a[2]).then(function(e){return t.recalculateOffsets(a[0]),e})):void 0})["catch"](Promise.CancellationError,function(){return c(e)})}function p(e){var t=[];_.forEach(y,function(e,r){t.push([r,r])}),_.forEach(E,function(e,r){var n=S[r];e&&n&&t.push([n,e])}),t=angular.copy(t);var r={},a=_.keys($);$={},t.forEach(function(e){var n=r[e[0]]?r[e[1]]?!1:e[1]:e[0];if(n){var a=F(n,t,r);$[_.min(a,function(e){return 1*e.substring(1)})]=a}});var i=_.xor(a,_.keys($));return!e&&i.length>0&&n.$emit("connectionGroupsChanged"),$}function d(e,t){v[e]=t}function f(e){y[e]=[],p()}function g(t){return"startpoint"===t?e.when(t):v[t]?e.when(v[t]):r(function(){return g(t)},150)}function m(e,t){y[e].push(t),S[t]=e}function h(){return[y,S,v,E,$]}var b=-1,v={},y={},S={startpoint:"startpoint"},E={},$={},w={},T={};T.getConnections=h,T.addSubject=f,T.addMapping=d,T.getScopeID=g,T.addPropertyToSubject=m,T.generateID=s,T.remove=l,T.disconnect=c,T.connect=u,T.updateConnectionLabel=i,T.getGroups=a,T.resetService=function(){t.resetService(),v={}},T.recalculateOffsets=function(e,r){g(e).then(function(e){t.recalculateOffsets(e,r)})},T.registerDestroyWatcher=function(e,t){w[e]=t};var F=function(e,t,r){function n(t){t[0]!==e||r[t[1]]?t[1]!==e||r[t[0]]||a.push(t[0]):a.push(t[1])}var a=[],i=[];for(a.push(e);a.length>0;)e=a.shift(),r[e]||(r[e]=!0,i.push(e),t.forEach(n));return i};return T}angular.module("VSB.connectionService",["VSB.arrowService"]).factory("connectionService",e),e.$inject=["$q","ArrowService","$timeout","$rootScope"]}(),function(){"use strict";function e(e,t,r){function n(){if(null!==a){var t=e.defer();return t.resolve(a),t.promise}return e.when(jsPlumb.ready(function(){a=jsPlumb.getInstance({Endpoint:["Dot",{cssClass:"hidden"}],ConnectionOverlays:[["Arrow",{location:1,id:"arrow",cssClass:"arrow",length:14,foldback:.8}],["Label",{label:"",id:"label",cssClass:"connector-label"}]],Container:"workspace"}),a.bind("connection",function(e){var t=e.connection.getParameter("label");if(null===t)e.connection.removeOverlay("label");else{var n=e.connection.getOverlay("label");r.registerEndpoint(e.connection.getParameter("sourceParent"),n),n.setLabel(t)}})})).then(function(){return a})}for(var a=null,i=[],s=0;1>=s;s+=1)for(var o=0;1>=o;o+=.125){var l=0,c=0;l=0===o?-1:l,l=1===o?1:l,0!==l&&(c=0===s?20:c,c=1===s?-20:c),i.push([o,s,l,0,0,c])}var u=[[1,.5,1,0,0,0,"right"],[0,.5,-1,0,0,0,"left"]];return{makeDraggable:function(e,t){return _.isNumber(e)&&(e+=""),n().then(function(r){return r.draggable(e,t)})},connectToSelf:function(e,t){return e=e.toString(),n().then(function(n){var a=n.connect({source:e,target:e,connector:["Bezier",{showLoopback:!1,curviness:50,proximityLimit:0}],cssClass:"connector connector-self",anchors:[[1,.25,1,0],[1,.75,1,0]],parameters:{label:null}});return r.registerEndpoint(t,a),a})},connect:function(e,a,s,o){return t.debug("connect",e,a,s),e=e.toString(),a=a.toString(),n().then(function(t){var n=t.connect({source:e,target:a,cssClass:"connector",endpoints:["Blank","Blank"],anchors:[u,i],connector:"Bezier",parameters:{label:s,sourceParent:o}});return r.registerEndpoint(o,n),t.repaintEverything(),n})},repaintEverything:function(){return n().then(function(e){return e.repaintEverything()})},detach:function(e){return n().then(function(t){return null!==e?t.detach(e):void 0})},deleteAllConnections:function(e){return e=e.toString(),n().then(function(t){return t.setSuspendDrawing(!0),null!==e&&t.removeAllEndpoints(e),t.setSuspendDrawing(!1),t.repaintEverything()})},updateConnectionLabel:function(e,t){return null!==e?e.getOverlay("label").setLabel(t):void 0},recalculateOffsets:function(e,t){return e=e.toString(),n().then(function(r){r.recalculateOffsets(e),t&&r.repaintEverything()})},resetService:function(){null!==a&&(a.cleanupListeners(),a.reset()),a=null}}}angular.module("VSB.arrowService",["VSB.config","VSB.zIndex"]).factory("ArrowService",e),e.$inject=["$q","$log","zIndexService"]}(),function(){"use strict";angular.module("zenubu.ngStrap",["mgcrea.ngStrap","ngSanitize","zenubu.ngStrap.datepicker","zenubu.ngStrap.dropdown","zenubu.ngStrap.modal"]).config(["$tooltipProvider",function(e){angular.extend(e.defaults,{html:!0})}])}(),function(){"use strict";angular.module("VSB.print",[]).factory("PrintService",["$window","$rootScope","$timeout","ArrowService","$q","MessageService",function(e,t,r,n,a,i){function s(){if(!c){c=!0,_.forEach(l,function(e){e.triggerHandler("beforePrint")});var e=t.$$phase;return"$apply"!==e&&"$digest"!==e&&t.$digest(),r(function(){n.repaintEverything(),c=!1,i.addMessage({message:'<span translate="PRINT_PREVIEW_MESSAGE"></span>',dismiss:o,dismissText:"CLOSE_PREVIEW",icon:"print","class":"success"})},100,!1)}}function o(){_.forEach(l,function(e){e.triggerHandler("afterPrint")});var e=t.$$phase;"$apply"!==e&&"$digest"!==e&&t.$digest(),r(function(){n.repaintEverything()},0)}var l={},c=!1;return{beforePrint:s,registerListener:function(e,t){l[e]=t},unregisterListener:function(e){delete l[e]}}}]).directive("onBeforePrint",["PrintService",function(e){return function(t,r,n){function a(){t.$eval(n.onBeforePrint)}function i(){t.$eval(n.onAfterPrint)}e.registerListener(t.$id,r),r.on("beforePrint",a),r.on("afterPrint",i),t.$on("$destroy",function(){r.off("beforePrint",a),r.off("afterPrint",i),e.unregisterListener(t.$id)})}}])}(),function(){"use strict";function e(e,t,r,n,a,i,s,o){var l=this;l.changeLanguage=function(e){r.use(e)};var c;l.translate=function(){null===a.mainSubject?(i.dismiss(c),c=i.addMessage({message:'{{ "MINIMUM_SUBJECTS" | translate }}',"class":"warning",icon:"exclamation-triangle"})):t.go("result")},l.print=function(){o.beforePrint()},l.resetWorkspace=function(){s.removeItem("current"),n.debug("Cleared Workspace"),a.reset(),e.translatedJSON="In the near future the translated JSON will be here.",e.translatedSPARQL="In the near future the translated SPARQL will be here."}}angular.module("VSB.layout.workspace.navigation",[]).controller("WorkspaceNavigationCtrl",e),e.$inject=["$scope","$state","$translate","$log","SubjectService","MessageService","$localForage","PrintService"]}(),function(){"use strict";function e(e,t,r,n,a,i){function s(t){t&&(e.addSubjectByURI(t),u.selectedSubject=void 0)}function o(e){p=e.pageX,d=e.pageY,u.mouseDown=!0}function l(e){if(u.mouseDown){var r={x:e.pageX-p,y:e.pageY-d};a.$emit("moveSubjectDrag",r),p=e.pageX,d=e.pageY,t.repaintEverything()}}function c(){a.$emit("moveSubjectEnd"),u.mouseDown=!1,t.repaintEverything()}var u=this;u.groups=[],u.availableSubjectClasses=[],u.totalItems=0,u.matchingItems=0,u.selectedSubject=void 0,u.subjects=e.subjects,u.addSubject=s,u.workspaceMouseDown=o,u.workspaceMouseMove=l,u.workspaceMouseUp=c,u.searchSubject=null,r.resetService(),n.reset(),u.loading=!0,i.when(e.loading).then(function(){u.loading=!1,u.refreshClasses("")});var p=0,d=0;u.mouseDown=!1,a.$on("translateEverything",function(){u.refreshClasses("")}),u.refreshClasses=function(t){return e.getAvailableClasses(t,50).then(function(e){var t=_.xor(_.pluck(e.items,"uri"),_.pluck(u.availableSubjectClasses,"uri"));t.length>0&&(u.availableSubjectClasses=e.items,u.totalItems=e.total,u.matchingItems=e.matching)})},u.groups=e.groups,null!==e.mainSubject&&(u.mainSubject=e.mainSubject,e.redrawMainConnection(e.mainSubject)),a.$on("mainSubjectChanged",function(){u.mainSubject=e.mainSubject}),a.$on("availableGroupsChanged",function(){u.groups=e.groups}),u.updateMainSubject=function(){e.setMainSubjectWithAlias(u.mainSubject.alias)}}angular.module("VSB.layout.workspace",["VSB.modals","VSB.print","ngSanitize","VSB.select","VSB.config","VSB.endPointService","VSB.parser","VSB.arrowService","LocalForageModule"]).controller("WorkspaceCtrl",e),e.$inject=["SubjectService","ArrowService","connectionService","zIndexService","$rootScope","$q"]}(),function(){"use strict";function e(e,t,r,n,a){function i(t){var n="&format="+encodeURIComponent(t.resultFormat.format),i=a.parse(e.translatedSPARQL);i.limit=t.limit,i.offset=t.offset,i=a.stringify(i);var s="";return t.resultFormat.qtxt?(i="&qtxt="+encodeURIComponent(i),s=""):(i="&query="+encodeURIComponent(i),r.defaultGraphURIs.forEach(function(e){s+="&default-graph-uri="+encodeURIComponent(e)})),-1===t.endpoint.indexOf("?")?t.endpoint+"?"+n+s+i:t.endpoint+n+s+i}e.resultHead=[],e.resultData=[],e.showQueries=!0,e.resultFormats=r.resultFormats;var s=t.translateVSBLToSPARQL();e.translatedJSON=s.json;var o=a.parse(s.sparql.toString());e.translatedSPARQL=a.stringify(o),e.queryExecutor={endpoint:r.resultURL,limit:100,offset:0,resultFormat:r.resultFormats[0]},e.openInNewTab=function(){if(e.runQuery.$invalid)return void(e.runQuery.$submitted=!0);var t=window.open(i(e.queryExecutor),"_blank");t.focus()},e.tabs=[{title:"RESULTS_PREVIEW",template:"/modules/result/tabs/preview.tpl.html"},{title:"SPARQL_QUERY",template:"/modules/result/tabs/sparql.tpl.html"},{title:"JSON",template:"/modules/result/tabs/json.tpl.html"}]}function t(){return function(e,t){if(0===t.length)return e;var r=1;return _.startsWith(t[0],"-")&&(r=-1),t=t[0].substring(1),e.sort(function(e,n){return r*e[t].value.localeCompare(n[t].value)})}}angular.module("VSB.layout.result",["VSB.config","SPARQLJS"]).filter("deepOrderBy",t).controller("ResultCtrl",e),e.$inject=["$scope","ParserManager","globalConfig","$filter","sparqljs"]}(),function(){"use strict";function e(e,t){return{link:function(r,n){n.bind("change",function(r){var a=new FileReader;a.onload=function(r){n.val(null);var a=JSON.parse(r.target.result);t.reset().then(function(){e.translateJSONToVSBL(a)})},a.readAsText(r.target.files[0])})}}}function t(e,t,r){var n={};return n.translateVSBLToSPARQL=function(){var n=t.parseVSBL2JSON();if(null===n)return void e.error("JSON is not valid / empty");var a=r.translateJSONToSPARQL(JSON.parse(n)),i=r.translateJSONToSponateMap(JSON.parse(n));return{json:n,sparql:a,sponateMap:i}},n}angular.module("VSB.parser",["VSB.config","VSB.parser.VSBL2JSON","VSB.parser.VSBL2SPARQL","VSB.parser.JSON2VSBL","LocalForageModule"]).factory("ParserManager",t).directive("jsonreader",e),e.$inject=["TranslatorToVSBL","SubjectService"],t.$inject=["$log","ParserVSBL2JSON","ParserToSPARQL"]}(),function(){"use strict";function e(){function e(e){return e.replace(/\W/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function t(t,r,n,a,i){return null!==a&&(n=f.NodeFactory.createVar(e(a)),i=!1),{s:t,p:r,o:n,view:i}}function r(t,r,n){var a=e(r+" "+t.linkTo),i=e(a+" "+t.uri),s=f.NodeFactory.createVar(i),o=f.NodeFactory.createVar(a);return t.operator=t.operator.replace(/%alias%/g,o),n&&!l.contains(s)&&u.add(s,t.operator),c.add(o),[]}function n(n,a,i){var s,o=e(a+" "+n.alias),c=n.uri,u=n.type,p=new d.ElementTriplesBlock,g=f.NodeFactory.createVar(a),h=f.NodeFactory.createUri(c),b=f.NodeFactory.createVar(o),v=b,y=i&&n.view;return"AGGREGATE_PROPERTY"===u?r(n,a,y):"$$uri"===c?(null!==n.compare&&(n.compare=n.compare.replace(/%before_arithmetic%/g,g).replace(/%after_arithmetic%/g,g),p.addTriples([new d.ElementFilter(n.compare)])),p):("INVERSE_PROPERTY"===u?(s=t(g,h,b,n.linkTo,y),g=s.o,v=s.s,y=s.view,u="OBJECT_PROPERTY"):"OBJECT_PROPERTY"===u&&(s=t(g,h,b,n.linkTo,y),v=s.o,y=s.view),"OBJECT_PROPERTY"===u?(p.addTriples([new f.Triple(g,h,v)]),n.filterExists&&y&&!l.contains(f.NodeFactory.createVar(o))&&(l.add(f.NodeFactory.createVar(o)),"OBJECT_PROPERTY"===u&&m.add(f.NodeFactory.createVar(o))),n.filterExists||(p=new d.ElementFilter("NOT EXISTS {"+(p.toString()+"}")))):n.filterExists?(n.hasFilter&&null!==n.arithmetic&&(v=f.NodeFactory.createVar(e(o+" temp"))),p.addTriples([new f.Triple(g,h,v)]),n.hasFilter&&(null!==n.arithmetic&&(n.arithmetic=n.arithmetic.replace(/%before_arithmetic%/g,v).replace(/%after_arithmetic%/g,b),p.addTriples([new d.ElementBind(b,n.arithmetic)])),null!==n.compare&&(n.compare=n.compare.replace(/%before_arithmetic%/g,v).replace(/%after_arithmetic%/g,b),p.addTriples([new d.ElementFilter(n.compare)]))),y&&!l.contains(f.NodeFactory.createVar(o))&&(l.add(f.NodeFactory.createVar(o)),"OBJECT_PROPERTY"===u&&m.add(f.NodeFactory.createVar(o)))):p.addTriples([new d.ElementFilter("NOT EXISTS {"+(new f.Triple(g,h,b).toString()+"}"))]),n.optional?new d.ElementOptional(p):p)}function a(t){var r=e(t.alias),a=f.NodeFactory.createVar(e(r)),i=f.NodeFactory.createUri(t.uri),s=new d.ElementTriplesBlock;return s.addTriples([new f.Triple(a,g.rdf.type,i)]),t.view&&!l.contains(a,r)&&(l.add(a),m.add(a),""===h&&(h=a)),t.hasOwnProperty("properties")&&t.properties.forEach(function(e){s.addTriples(n(e,r,t.view))}),s}function i(e){var t=new d.VarExprList;return l.entries().forEach(function(e){c.contains(e.v)||t.add(e.v,e.expr)}),e&&u.entries().forEach(function(e){c.contains(e.v)||t.add(e.v,e.expr)}),t}function s(e){u=new d.VarExprList,l=new d.VarExprList,c=new d.VarExprList;var t=new d.Query,r=new d.ElementTriplesBlock;return e.hasOwnProperty("SUBJECTS")&&e.SUBJECTS.forEach(function(e){r.addTriples(a(e))}),t.setQueryPattern(r),t.setProjectVars(i(!0)),t.setDistinct(!0),u.entries().length>0&&(t.groupBy=i().vars),t}function o(e){u=new d.VarExprList,m=new d.VarExprList,h="",l=new d.VarExprList,c=new d.VarExprList;var t,r=new d.ElementTriplesBlock;return e.hasOwnProperty("SUBJECTS")&&e.SUBJECTS.forEach(function(e){r.addTriples(a(e))}),t={name:(new Date).toISOString(),template:[{id:h.toString(),rows:[{id:"?rowId"}]}],from:r.toString()},i().getVars().forEach(function(e){var r=e.toString().replace(/^\?/,"");m.contains(e)&&(r="$"+r),t.template[0].rows[0][r]=e.toString()}),t}var l,c,u,p=new Jassa(Promise,$.ajax),d=p.sparql,f=p.rdf,g=p.vocab,m=new d.VarExprList,h="";return{translateJSONToSPARQL:s,translateJSONToSponateMap:o}}angular.module("VSB.parser.VSBL2SPARQL",[]).factory("ParserToSPARQL",e)}(),function(){"use strict";function e(e,t,r,n,a){var i=function(e){for(var t in e)e.hasOwnProperty(t)&&(_.startsWith(t,"$")||"function"==typeof e[t])&&delete e[t];return e},s={};return s.parseVSBL2JSON=function(){t.debug("Translate VSBL to JSON");var s={CONFIG:r.name,START:{type:"LIST_ALL",linkTo:a.getMainSubject().alias},SUBJECTS:[]},o=_.cloneDeep(a.getSubjects());return o.map(function(e){return e.properties=e.$selectedProperties.map(function(e){return e.linkTo="STANDARD_PROPERTY"!==e.type&&_.isObject(e.linkTo)&&e.linkTo.hasOwnProperty("alias")?e.linkTo.alias:null,i(e)}),i(e)}),s.SUBJECTS=o,n.setItem("current",s).then(function(){t.debug("Current Workspace saved into localForage")},function(){t.debug("Saving to localForage failed",arguments)}),e.$emit("updateJSON",JSON.stringify(s,null,2)),JSON.stringify(s,null,2)},s}angular.module("VSB.parser.VSBL2JSON",["VSB.config","LocalForageModule"]).factory("ParserVSBL2JSON",e),e.$inject=["$rootScope","$log","globalConfig","$localForage","SubjectService"]}(),function(){"use strict";function e(e,t){var r={};return r.translateJSONToVSBL=function(r){if(t.debug("Translate JSON to VSBL"),null===r)return t.error("Empty JSON File"),null;var n=[];r.SUBJECTS.forEach(function(t){t.$copied=!0;var r=t.properties;delete t.properties;var a=[];t=e.addSubject(t),r.forEach(function(e){e.$copied=!0,e=t.addProperty(e),e.linkTo&&("AGGREGATE_PROPERTY"!==e.type?n.push(e):a.push(e))}),a.forEach(function(e){var r=_.where(t.$selectedProperties,{alias:e.linkTo});r.length>0&&(e.linkTo=r[0])})}),n.forEach(function(t){e.linkSubjectWithProperty(t)}),e.setMainSubjectWithAlias(r.START.linkTo)},r}angular.module("VSB.parser.JSON2VSBL",["VSB.config","VSB.property.model","VSB.subject.model"]).factory("TranslatorToVSBL",e),e.$inject=["SubjectService","$log"]}(),function(){"use strict";angular.module("VSB.message",[]).factory("MessageService",function(){var e=[];return{messages:e,addMessage:function(t){return _.isString(t)&&(t={message:t,"class":"info"}),t["class"]="alert-"+t["class"],t.icon&&(t.icon="fa-"+t.icon),e.push(t),t},dismiss:function(t,r){return _.isObject(t)&&(!r&&_.isFunction(t.dismiss)&&t.dismiss(),_.remove(e,t)),null}}}).directive("messages",function(){return{restrict:"A",scope:!0,replace:!0,controller:["MessageService",function(e){var t=this;t.messages=e.messages,t.dismiss=e.dismiss}],controllerAs:"vm",template:'<div class="messageContainer" ><div class="alert" ng-class="message.class" ng-repeat="message in vm.messages" ><a class="pull-right alert-link" href="" ng-click="vm.dismiss(message)"><i class="pull-left fa fa-lg fa-times"></i><span ng-if="message.dismissText" translate="{{message.dismissText}}"></span></a><i class="pull-left fa fa-lg fa-fw" ng-if="message.icon" ng-class="message.icon" ></i><span compile="message.message"></span></div></div>'}})}(),function(){"use strict";function e(e,t,r,n){function a(t){return void 0!==o[t]?r.when(o[t]):s.hasOwnProperty(t)&&!_.isEmpty(s[t])?e.refresh().then(function(){var n=[];return _.forEach(s[t].values,function(r){var a=r.uri+".$label",o=r.uri+".$comment",l=e([a,o]).then(function(e){var n=e[o]===o?!1:e[o];return"class"===s[t].type?i(r,n,e[a]):(r.$comment=n,r.$label=e[a],r)});n.push(l)}),r.all(n)}).then(function(e){return e=_.sortBy(e,function(e){return e.$label.toLocaleLowerCase()}),o[t]=e,r.when(e)}):r.when([])}function i(e,t,r){return{uri:e.uri,$comment:t,$label:r}}var s={},o={},l={getFromCache:a,putInCache:function(e,t,r){return s[e]={type:t,values:r},a(e)},removeFromCache:function(e){delete o[e],delete s[e]}},c=null;return t.$on("$translateChangeSuccess",function(e,r){r.language===c||_.isEmpty(o)||(n.debug("changed Language to",r.language),c=r.language,o={},t.$emit("translateEverything"))}),l}angular.module("VSB.language.translationCacheService",["VSB.config","pascalprecht.translate"]).factory("translationCacheService",e),e.$inject=["$translate","$rootScope","$q","$log"]}(),function(){"use strict";function e(e){return function(t,r,n){if(!r)return t;n||(n="");var a=angular.copy(t);return a.map(function(t){return t[r]=e.instant(n+t[r]),t}).sort(function(e,t){return"string"==typeof e[r]&&"string"==typeof t[r]?e[r].toLowerCase().localeCompare(t[r].toLowerCase()):void 0})}}function t(e,t){var r=_.chain(t.languages.GUI).map(function(e){return[e+"-*",e]}).zipObject().value();e.useLoader("languageLoader").useSanitizeValueStrategy("escapeParameters").useLocalStorage().uniformLanguageTag("bcp47").registerAvailableLanguageKeys(t.languages.GUI,r).fallbackLanguage("default").determinePreferredLanguage()}function r(e){return function(t){return e.getItem(t.key)}}function n(e,t,r){var n,a={"default":{ADD_FILTER:"add filter",AFTER:"after",ARITHMETICS:"arithmetics",A_LINK_TO:"a link to",BACK_TO_WORKSPACE:"Workspace",BEFORE:"before",BUTTON_LANG_DE:"german",BUTTON_LANG_EN:"english",MIXED_CONTENT_WARNING:"You are trying to view mixed content.<br>Your browser may be blocking data from the endpoint. (The Visual SPARQL Builder is running on {{ VSBProtocol }}, your SPARQL endpoint on {{EndpointProtocol}})<br>In <b>Firefox</b> you need to navigate to <a class='alert-link' href='{{VSBLink}}'>the {{EndpointProtocol}} version of this site.</a><br>In <b>Chrome</b> you could click on the little armor in the URL bar and 'Load unsafe scripts' or also navigate to the Firefox link.",CLASSES_FOUND_ZERO:"No classes found.<br>Please try another search term.",CLASSES_FOUND_X:"Found {{matching}} classes.<br>Total classes: {{total}}",CLASSES_FOUND_X_MORE:"Showing {{x}} of {{matching}} found classes.<br>Total classes: {{total}}",CLASSES_FOUND_NO_SEARCH:"Showing {{matching}} of {{total}} classes<br>Please enter a search term.",PROPERTIES_FOUND_ZERO:"No properties found.<br>Please try another search term.",PROPERTIES_FOUND_X:"Found {{matching}} properties.<br>Total properties: {{total}}",PROPERTIES_FOUND_X_MORE:"Showing {{x}} of {{matching}} found properties.<br>Total properties: {{total}}",PROPERTIES_FOUND_NO_SEARCH:"Showing {{matching}} of {{total}} properties<br>Please enter a search term.",CHOOSE_A_PROPERTY:"Choose a property",CHOOSE_A_SUBJECT:"Choose a subject",COMPARISON:"comparison",CONTAINS:"contains",DELETE_PROPERTY:"delete property",DOWNLOAD_JSON:"Download JSON",ENDS_WITH:"ends with",EQUALS:"equals",EQUALS_NOT:"equals not",EXISTS:"exists",EXISTS_NOT:"exists not",HELP:"Help",HIDE_PROPERTY:"hide property",HIDE_QUERIES:"hide queries",IS_MANDATORY:"is mandatory",IS_OPTIONAL:"is optional",KEEP_OPEN:"Keep open",PRINT_PREVIEW:"Print Preview",HIDE_SUBJECT:"Hide Subject",SHOW_SUBJECT:"Show Subject",DELETE_SUBJECT:"Delete Subject",CONNECT_SUBJECT:"Connect Subject to another Subject",ADD_APPROPRIATE_CLASS:"Add appropriate Subject",CAST_PROPERTY:"Change property type",LANGUAGE:"language",LINK_WITH_SUBJECT:"Link with a subject",LIST_ALL:"List all",LOAD_JSON:"Load JSON",NO_COMPARISON:"no comparison",PICK_MAIN_SUBJECT:"Pick a main subject",PROPERTY:"property",QUERIES:"Queries",REGEX:"regex",REMOVE_FILTER:"remove filter",RESET_WORKSPACE:"Reset Workspace",RESULTS:"Results",RUN_QUERY:"Run Query",SEARCH_RELATION:'To Search a Relation between {{alias}} and another subject, please click on the <i class="fa fa-plug fa-fw"></i> plug button of this subject.',SELECT_LANGUAGE:"Select a language",SHOW_PROPERTY:"show property",SHOW_QUERIES:"show queries",STARTS_WITH:"starts with",WORKSPACE:"Workspace",TITLE:"Visual SPARQL Builder",TITLE_SHORT:"VSB"}},i={};return i.mergeLanguages=function(e){r.debug("Missing de translations",_.difference(_.keys(e.en),_.keys(e.de))),r.debug("Missing en tranlsations",_.difference(_.keys(e.de),_.keys(e.en))),a=_.merge(a,e)},i.setItem=function(t,r,n){return a.hasOwnProperty(t)||(a[t]={}),a[t][r]=n,e.when(n)},i.getItem=function(t){var r=e.defer();return r.resolve(a.hasOwnProperty(t)?a[t]:{}),e.when(n).then(function(){return r.promise})},n=t.get("locale.json").success(function(e){i.mergeLanguages(e)}),i}angular.module("VSB.language",["VSB.config","VSB.language.translationCacheService","pascalprecht.translate","ngCookies"]).config(t).factory("languageStorage",n).factory("languageLoader",r).filter("translateAndSortLocalizedObjectArrayByKey",e),e.$inject=["$translate"],t.$inject=["$translateProvider","globalConfig"],r.$inject=["languageStorage"],n.$inject=["$q","$http","$log"]}(),function(){"use strict";function e(e,t,a,i){function s(r){if(_.isFunction(r)){var n=r(e,t);t=_.isString(n.filter)?n.filter:t,e=_.isArray(n.array)?n.array:e}}if(!_.isArray(e))return e;i=_.isObject(i)?{post:_.flatten([i.post]),pre:_.flatten([i.pre])}:{post:_.flatten([i])},t=_.isString(t)?angular.copy(t):null,a=_.isString(a)||_.isNumber(a)?angular.copy(a):null;var o=e.length,l=null;if(!_.isNull(t)){_.forEach(i.pre,s);var c=n(t),u=_.map(c,function(e){return new RegExp(_.escapeRegExp(e),"i")});e=_.filter(e,function(e){return _.every(u,function(t){return _.some(e,function(e){return _.isString(e)&&_.deburr(e).match(t)})})}),l=e.length,e=r(e,c),_.forEach(i.post,s)}return _.isNull(a)||(e=_.take(e,a)),{items:e,total:o,matching:l}}function t(e,t){if(!_.isString(e)||!_.isString(t))return e;var r=n(t);return _.forEach(r,function(t){var r=_.deburr(e).toLowerCase();r=r.replace(new RegExp(_.escapeRegExp(t),"ig"),"||");var n=0;r=_.reduce(r.split("||"),function(e,r){return e.push([n,r.length]),n+=r.length+t.length,e},[]),e=_.reduce(r,function(r,n){var a=e.substr(n[0],n[1]),i=e.substr(n[0]+n[1],t.length),s=i.length>0?"<>"+i+"</>":"";return r+a+s},"")}),e.replace(/<>/g,'<span class="ui-select-highlight">').replace(/<\/>/g,"</span>")}function r(e,t){if(!_.isArray(e)||!_.isArray(t)||_.isEmpty(t))return e;t=_.map(t,_.escapeRegExp).join("|");var r=new RegExp("^("+t+")","i"),n=new RegExp(t,"i");return _.sortBy(e,function(e){var t=_.deburr(e.$label);return _.isString(t)?t.match(r)?10:t.match(n)?25:50:100})}function n(e){return e=_.words(_.deburr(e).toLowerCase(),/[^ <>,]+/g),e=_.sortBy(e,"length"),_.reduceRight(e,function(e,t){return _.contains(e.join(", "),t)||e.push(t),e},[])}function a(e){e.decorator("uiSelectChoicesDirective",["$delegate",function(e){function t(){return a=s.apply(this,arguments),r}function r(e,t,r,i){a.apply(this,arguments),r.$observe("totalItems",function(e){i.totalItems=e}),r.$observe("matchingItems",function(e){i.matchingItems=e}),e.footerZero=r.footerZero,e.footerNoSearch=r.footerNoSearch,e.footerFound=r.footerFound,i.containsSearchTerm=function(e,t){return t&&e?_.deburr(e).match(new RegExp(_.map(n(t),_.escapeRegExp).join("|"),"i")):!1}}var a,i=e[0],s=i.compile;return i.compile=t,e}])}angular.module("VSB.select",["ui.select"]).config(["uiSelectConfig",function(e){e.theme="/components/ui.select"}]).directive("uiSelectChoicesRowInner",function(){return{restrict:"E",replace:!0,templateUrl:"/components/ui.select/choiceRowInner.tpl.html"}}).filter("highlightSearchTerm",function(){return t}).config(a).factory("helperFunctions",function(){return{filterByTokenStringWithLimit:e,highlightSearchTermDeburred:t}}),a.$inject=["$provide"]}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.sparqljs=e()}}(function(){return function e(t,r,n){function a(s,o){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return a(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t,r){},{}],2:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return a.exec(e).slice(1)};r.resolve=function(){for(var r="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,a="/"===s.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+r||"."},r.normalize=function(e){var a=r.isAbsolute(e),i="/"===s(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&i&&(e+="/"),(a?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var a=n(e.split("/")),i=n(t.split("/")),s=Math.min(a.length,i.length),o=s,l=0;s>l;l++)if(a[l]!==i[l]){o=l;break}for(var c=[],l=o;l<a.length;l++)c.push("..");return c=c.concat(i.slice(o)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return i(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:3}],3:[function(e,t,r){function n(){u=!1,o.length?c=o.concat(c):p=-1,c.length&&a()}function a(){if(!u){var e=setTimeout(n);u=!0;for(var t=c.length;t;){for(o=c,c=[];++p<t;)o&&o[p].run();p=-1,t=c.length}o=null,u=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var o,l=t.exports={},c=[],u=!1,p=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new i(e,t)),1!==c.length||u||setTimeout(a,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],4:[function(e,t,r){function n(e){var t="";for(var r in e.prefixes)t+="PREFIX "+r+": <"+e.prefixes[r]+">\n";return e.queryType&&(t+=e.queryType.toUpperCase()+" "),e.reduced&&(t+="REDUCED "),e.distinct&&(t+="DISTINCT "),e.variables?t+=c(e.variables,function(e){return l(e)?s(e):"("+i(e.expression)+" AS "+e.variable+")"})+" ":e.template&&(t+=d.group(e.template,!0)+"\n"),e.from&&(t+=c(e.from["default"]||[],function(e){return"FROM "+s(e)+"\n"},"")+c(e.from.named||[],function(e){return"FROM NAMED "+s(e)+"\n"},"")),e.where&&(t+="WHERE "+d.group(e.where,!0)+"\n"),e.updates?t+=c(e.updates,o,";\n"):e.values&&(t+=d.values(e)),e.group&&(t+="GROUP BY "+c(e.group,function(e){return l(e.expression)?e.expression:"("+i(e.expression)+")"})+"\n"),e.having&&(t+="HAVING ("+c(e.having,i)+")\n"),e.order&&(t+="ORDER BY "+c(e.order,function(e){var t=i(e.expression);return e.descending?"DESC("+t+")":t})+"\n"),e.offset&&(t+="OFFSET "+e.offset+"\n"),e.limit&&(t+="LIMIT "+e.limit+"\n"),t.trim()}function a(e){var t=e.type||e instanceof Array&&"array"||(e.subject&&e.predicate&&e.object?"triple":"");if(!(t in d))throw new Error("Unknown entry type: "+t);return d[t](e)}function i(e){if(l(e))return s(e);switch(e.type.toLowerCase()){case"aggregate":return e.aggregation.toUpperCase()+"("+(e.distinct?"DISTINCT ":"")+i(e.expression)+(e.separator?"; SEPARATOR = "+s('"'+e.separator+'"'):"")+")";case"functioncall":return s(e["function"])+"("+c(e.args,i,", ")+")";case"operation":var t=e.operator.toUpperCase(),r=e.args||[],n=r[0];switch(e.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return c(r,function(e){return l(e)?s(e):"("+i(e)+")"}," "+t+" ");case"!":return"!"+i(n);case"notin":t="NOT IN";case"in":return i(n)+" "+t+"("+(l(n=r[1])?n:c(n,i,", "))+")";case"notexists":t="NOT EXISTS";case"exists":return t+" "+d.group(n,!0);default:return t+"("+c(r,i,", ")+")"}default:throw new Error("Unknown expression type: "+e.type)}}function s(e){if(l(e))switch(e[0]){case"?":case"$":case"*":case"_":return e;case'"':var t=e.match(/^"([^]*)"(?:(@.+)|\^\^(.+))?$/)||{},r=t[1]||"",n=t[2]||"",a=t[3];if(e='"'+r.replace(f,g)+'"'+n,a){if(a===p&&/^\d+$/.test(r))return r;e+="^^<"+a+">"}return e;default:return"<"+e+">"}else{var i=e.items.map(s),o=e.pathType;switch(o){case"^":case"!":return o+i[0];case"*":case"+":case"?":return i[0]+o;default:return"("+i.join(o)+")"}}}function o(e){switch(e.type||e.updateType){case"load":return"LOAD"+(e.source?" "+s(e.source):"")+(e.destination?" INTO GRAPH "+s(e.destination):"");case"insert":return"INSERT DATA "+d.group(e.insert,!0);

case"delete":return"DELETE DATA "+d.group(e["delete"],!0);case"deletewhere":return"DELETE WHERE "+d.group(e["delete"],!0);case"insertdelete":return(e.graph?"WITH "+s(e.graph)+"\n":"")+(e["delete"].length?"DELETE "+d.group(e["delete"],!0)+"\n":"")+(e.insert.length?"INSERT "+d.group(e.insert,!0)+"\n":"")+"WHERE "+d.group(e.where,!0);case"add":case"copy":case"move":return e.type.toUpperCase()+(e.source["default"]?" DEFAULT ":" ")+"TO "+s(e.destination.name);default:throw new Error("Unknown update query type: "+e.type)}}function l(e){return"string"==typeof e}function c(e,t,r){return e.map(t).join(l(r)?r:" ")}function u(e){return e.replace(/^/gm,"  ")}var p="http://www.w3.org/2001/XMLSchema#integer";t.exports=function(){return{stringify:n}};var d={triple:function(e){return s(e.subject)+" "+s(e.predicate)+" "+s(e.object)+"."},array:function(e){return c(e,a,"\n")},bgp:function(e){return c(e.triples,d.triple,"\n")},graph:function(e){return"GRAPH "+s(e.name)+" "+d.group(e)},group:function(e,t){return e=t!==!0?d.array(e.patterns||e.triples):a("group"!==e.type?e:e.patterns),-1===e.indexOf("\n")?"{ "+e+" }":"{\n"+u(e)+"\n}"},query:function(e){return"{\n"+u(n(e))+"\n}"},filter:function(e){return"FILTER("+i(e.expression)+")"},bind:function(e){return"BIND("+i(e.expression)+" AS "+e.variable+")"},optional:function(e){return"OPTIONAL "+d.group(e)},union:function(e){return c(e.patterns,function(e){return d.group(e,!0)},"\nUNION\n")},minus:function(e){return"MINUS "+d.group(e)},values:function(e){var t=Object.keys(e.values.reduce(function(e,t){for(var r in t)e[r]=!0;return e},{}));return"VALUES ("+t.join(" ")+") {\n"+c(e.values,function(e){return"  ("+c(t,function(t){return void 0!==e[t]?s(e[t]):"UNDEF"})+")"},"\n")+"\n}"},service:function(e){return"SERVICE "+(e.silent?"SILENT ":"")+s(e.name)+" "+d.group(e)}},f=/["\\\t\n\r\b\f]/g,g=function(e){return m[e]},m={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"}},{}],5:[function(e,t,r){(function(n){var a=function(){function e(e){return e.toLowerCase()}function t(e,t){return e.push(t),e}function r(e,t){return e.push.apply(e,t),e}function n(e){e||(e={});for(var t,r=1,n=arguments.length;n>r&&(t=arguments[r]||{});r++)for(var a in t)e[a]=t[a];return e}function a(){for(var e=[],t=0,r=arguments.length;r>t;t++)e=e.concat.apply(e,arguments[t]);return e}function i(e){switch("<"===e[0]&&(e=e.substring(1,e.length-1)),e[0]){case void 0:return kr;case"#":return kr+e;case"?":return kr.replace(/(?:\?.*)?$/,e);case"/":return xr+e;default:return/^[a-z]+:/.test(e)?e:Dr+e}}function s(e){if(e){var t=e[0];if("?"===t)return e;if("$"===t)return"?"+e.substr(1)}return e}function o(e,t){return{type:"operation",operator:e,args:t||[]}}function l(e,t){var r={expression:e};if(t)for(var n in t)r[n]=t[n];return r}function c(e,t){return{type:"path",pathType:e,items:t}}function u(e,t){for(var r,n=0,a=t.length;a>n&&(r=t[n]);n++)e=o(r[0],[e,r[1]]);return e}function p(e){for(var t,r=[],n=[],a=e.length,i=0;a>i&&(t=e[i]);i++)(t.named?n:r).push(t.iri);return a?{from:{"default":r,named:n}}:null}function d(e){return parseInt(e,10)}function f(e){return"group"===e.type&&1===e.patterns.length?e.patterns[0]:e}function g(e,t){return'"'+e+'"^^'+t}function m(e,t,r){var n={};return null!=e&&(n.subject=e),null!=t&&(n.predicate=t),null!=r&&(n.object=r),n}function h(){return"_:b"+Nr++}function b(e,t){e=e.substring(t,e.length-t);try{e=e.replace(Lr,function(e,t,r,n){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return Br(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return 65535>a?Br(a):Br(55296+((a-=65536)>>10),56320+(1023&a))}var i=jr[n];if(!i)throw new Error;return i})}catch(r){return""}return'"'+e+'"'}function v(e){var t,n=h(),a=n,i=[],s=[];e.forEach(function(e){i.push(e.entity),r(s,e.triples)});for(var o=0,l=0,c=i.length,t=Array(2*c);c>o;)t[l++]=m(a,_r,i[o]),t[l++]=m(a,wr,a=++o<c?h():Tr);return{entity:n,triples:r(t,s)}}function y(e){var t=h();return{entity:t,triples:e.map(function(e){return n(m(t),e)})}}function S(e,t,n){var i=[],s=[];return t.forEach(function(t){i.push(m(null,e,t.entity)),r(s,t.triples)}),a(i,n||[],s)}function E(){this.yy={}}var $=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},_=[11,14,23,33,42,47,95,105,108,110,111,120,121,126,288,289,290,291,292],w=[95,105,108,110,111,120,121,126,288,289,290,291,292],T=[1,21],F=[1,25],R=[6,82],A=[37,38,50],C=[37,50],P=[1,55],I=[1,57],O=[1,53],k=[1,56],D=[27,28,283],x=[12,15,277],N=[107,129,286,293],L=[12,15,107,129,277],j=[1,76],B=[1,80],U=[1,82],V=[107,129,286,287,293],M=[12,15,107,129,277,287],G=[1,89],q=[2,229],Y=[1,88],Q=[12,15,27,28,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],J=[6,37,38,50,60,67,70,78,80,82],W=[6,12,15,27,37,38,50,60,67,70,78,80,82,277],H=[6,12,15,27,28,30,31,37,38,40,50,60,67,70,78,79,80,82,89,104,107,120,121,123,128,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,297,298,300,301,302,303,304,305,306,307,308,309],z=[1,104],X=[1,105],K=[6,12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],Z=[27,31],ee=[2,284],te=[1,118],re=[1,116],ne=[6,192],ae=[2,301],ie=[2,289],se=[37,123],oe=[6,40,67,70,78,80,82],le=[2,231],ce=[1,132],ue=[1,134],pe=[1,144],de=[1,150],fe=[1,153],ge=[1,149],me=[1,151],he=[1,147],be=[1,148],ve=[1,154],ye=[1,155],Se=[1,158],Ee=[1,159],$e=[1,160],_e=[1,161],we=[1,162],Te=[1,163],Fe=[1,164],Re=[1,165],Ae=[1,166],Ce=[1,167],Pe=[1,168],Ie=[1,169],Oe=[6,60,67,70,78,80,82],ke=[27,28,37,38,50],De=[12,15,27,28,79,203,237,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,301,309,310,311,312,313,314],xe=[2,374],Ne=[12,15,40,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],Le=[6,104,192],je=[40,107],Be=[6,40,70,78,80,82],Ue=[2,313],Ve=[2,305],Me=[12,15,27,181,277],Ge=[2,341],qe=[2,337],Ye=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],Qe=[12,15,27,28,30,31,38,40,79,82,89,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309],Je=[12,15,27,28,30,31,38,40,79,82,89,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309],We=[1,227],He=[1,238],ze=[6,40,78,80,82],Xe=[1,249],Ke=[1,251],Ze=[1,252],et=[1,253],tt=[1,254],rt=[1,256],nt=[1,257],at=[2,405],it=[1,260],st=[1,261],ot=[1,262],lt=[1,268],ct=[1,263],ut=[1,264],pt=[1,265],dt=[1,266],ft=[1,267],gt=[1,274],mt=[1,273],ht=[38,40,82,107,155,156,158,161,162],bt=[1,282],vt=[1,283],yt=[40,107,294],St=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],Et=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,192,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],$t=[12,15,27,28,79,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,309,310,311,312,313,314],_t=[2,398],wt=[1,301],Tt=[1,302],Ft=[1,303],Rt=[12,15,31,40,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],At=[28,40],Ct=[2,304],Pt=[6,40,82],It=[6,12,15,28,40,70,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],Ot=[6,12,15,27,28,38,40,70,73,75,78,79,80,82,107,155,156,158,161,162,163,210,213,214,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294,309,310,311,312,313,314],kt=[6,12,15,27,28,30,31,38,40,67,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],Dt=[1,326],xt=[1,325],Nt=[1,332],Lt=[1,331],jt=[28,163],Bt=[6,12,15,27,28,40,67,70,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],Ut=[6,12,15,27,28,30,31,38,40,60,67,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,295,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],Vt=[12,15,28,181,203,208,277],Mt=[2,355],Gt=[1,354],qt=[38,40,82,107,155,156,158,161,162,294],Yt=[2,343],Qt=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,181,192,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],Jt=[30,31,192,242,302,303],Wt=[30,31,192,222,237,242,259,271,272,273,274,275,276,301,302,303,304,305,306,307,308,309],Ht=[30,31,192,222,237,242,259,271,272,273,274,275,276,283,298,301,302,303,304,305,306,307,308,309],zt=[1,387],Xt=[1,402],Kt=[1,399],Zt=[1,400],er=[12,15,27,28,79,203,237,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,301,309,310,311,312,313,314],tr=[12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],rr=[12,15,27,277],nr=[12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],ar=[2,316],ir=[12,15,27,181,192,277],sr=[1,453],or=[1,454],lr=[12,15,31,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],cr=[6,12,15,27,28,40,73,75,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],ur=[2,311],pr=[12,15,28,181,203,277],dr=[38,40,82,107,155,156,158,161,162,192,211,294],fr=[12,15,27,28,40,79,107,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],gr=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,297,298],mr=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,297,298,300,301],hr=[1,545],br=[1,546],vr=[2,299],yr=[12,15,31,181,208,277],Sr={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdateUnit:3,QueryOrUpdateUnit_repetition0:4,QueryOrUpdateUnit_group0:5,EOF:6,Query:7,Query_group0:8,Query_option0:9,BaseDecl:10,BASE:11,IRIREF:12,PrefixDecl:13,PREFIX:14,PNAME_NS:15,SelectQuery:16,SelectClause:17,SelectQuery_repetition0:18,WhereClause:19,SolutionModifier:20,SubSelect:21,SubSelect_option0:22,SELECT:23,SelectClause_option0:24,SelectClause_group0:25,SelectClauseItem:26,VAR:27,"(":28,Expression:29,AS:30,")":31,ConstructQuery:32,CONSTRUCT:33,ConstructTemplate:34,ConstructQuery_repetition0:35,ConstructQuery_repetition1:36,WHERE:37,"{":38,ConstructQuery_option0:39,"}":40,DescribeQuery:41,DESCRIBE:42,DescribeQuery_group0:43,DescribeQuery_repetition0:44,DescribeQuery_option0:45,AskQuery:46,ASK:47,AskQuery_repetition0:48,DatasetClause:49,FROM:50,DatasetClause_option0:51,iri:52,WhereClause_option0:53,GroupGraphPattern:54,SolutionModifier_option0:55,SolutionModifier_option1:56,SolutionModifier_option2:57,SolutionModifier_option3:58,GroupClause:59,GROUP:60,BY:61,GroupClause_repetition_plus0:62,GroupCondition:63,BuiltInCall:64,FunctionCall:65,HavingClause:66,HAVING:67,HavingClause_repetition_plus0:68,OrderClause:69,ORDER:70,OrderClause_repetition_plus0:71,OrderCondition:72,ASC:73,BrackettedExpression:74,DESC:75,Constraint:76,LimitOffsetClauses:77,LIMIT:78,INTEGER:79,OFFSET:80,ValuesClause:81,VALUES:82,InlineData:83,InlineData_repetition0:84,InlineData_repetition1:85,InlineData_repetition2:86,DataBlockValue:87,Literal:88,UNDEF:89,DataBlockValueList:90,DataBlockValueList_repetition0:91,Update:92,Update_repetition0:93,Update1:94,LOAD:95,Update1_option0:96,Update1_option1:97,Update1_group0:98,Update1_option2:99,GraphRefAll:100,Update1_group1:101,Update1_option3:102,GraphOrDefault:103,TO:104,CREATE:105,Update1_option4:106,GRAPH:107,INSERTDATA:108,QuadPattern:109,DELETEDATA:110,DELETEWHERE:111,Update1_option5:112,InsertClause:113,Update1_option6:114,Update1_repetition0:115,Update1_option7:116,DeleteClause:117,Update1_option8:118,Update1_repetition1:119,DELETE:120,INSERT:121,UsingClause:122,USING:123,UsingClause_option0:124,WithClause:125,WITH:126,IntoGraphClause:127,INTO:128,DEFAULT:129,GraphOrDefault_option0:130,GraphRefAll_group0:131,QuadPattern_option0:132,QuadPattern_repetition0:133,QuadsNotTriples:134,QuadsNotTriples_group0:135,QuadsNotTriples_option0:136,QuadsNotTriples_option1:137,QuadsNotTriples_option2:138,TriplesTemplate:139,TriplesTemplate_repetition0:140,TriplesSameSubject:141,TriplesTemplate_option0:142,GroupGraphPatternSub:143,GroupGraphPatternSub_option0:144,GroupGraphPatternSub_repetition0:145,GroupGraphPatternSubTail:146,GraphPatternNotTriples:147,GroupGraphPatternSubTail_option0:148,GroupGraphPatternSubTail_option1:149,TriplesBlock:150,TriplesBlock_repetition0:151,TriplesSameSubjectPath:152,TriplesBlock_option0:153,GraphPatternNotTriples_repetition0:154,OPTIONAL:155,MINUS:156,GraphPatternNotTriples_group0:157,SERVICE:158,GraphPatternNotTriples_option0:159,GraphPatternNotTriples_group1:160,FILTER:161,BIND:162,NIL:163,FunctionCall_option0:164,FunctionCall_repetition0:165,ExpressionList:166,ExpressionList_repetition0:167,ConstructTemplate_option0:168,ConstructTriples:169,ConstructTriples_repetition0:170,ConstructTriples_option0:171,VarOrTerm:172,PropertyListNotEmpty:173,TriplesNode:174,PropertyList:175,PropertyList_option0:176,PropertyListNotEmpty_repetition0:177,VerbObjectList:178,Verb:179,ObjectList:180,a:181,ObjectList_repetition0:182,GraphNode:183,PropertyListPathNotEmpty:184,TriplesNodePath:185,TriplesSameSubjectPath_option0:186,PropertyListPathNotEmpty_group0:187,PropertyListPathNotEmpty_repetition0:188,GraphNodePath:189,PropertyListPathNotEmpty_repetition1:190,PropertyListPathNotEmptyTail:191,";":192,PropertyListPathNotEmptyTail_group0:193,Path:194,Path_repetition0:195,PathSequence:196,PathSequence_repetition0:197,PathEltOrInverse:198,PathElt:199,PathPrimary:200,PathElt_option0:201,PathEltOrInverse_option0:202,"!":203,PathNegatedPropertySet:204,PathOneInPropertySet:205,PathNegatedPropertySet_repetition0:206,PathNegatedPropertySet_option0:207,"^":208,TriplesNode_repetition_plus0:209,"[":210,"]":211,TriplesNodePath_repetition_plus0:212,BLANK_NODE_LABEL:213,ANON:214,Expression_repetition0:215,ConditionalAndExpression:216,ConditionalAndExpression_repetition0:217,RelationalExpression:218,AdditiveExpression:219,RelationalExpression_group0:220,RelationalExpression_option0:221,IN:222,MultiplicativeExpression:223,AdditiveExpression_repetition0:224,AdditiveExpressionTail:225,AdditiveExpressionTail_group0:226,NumericLiteralPositive:227,AdditiveExpressionTail_repetition0:228,NumericLiteralNegative:229,AdditiveExpressionTail_repetition1:230,UnaryExpression:231,MultiplicativeExpression_repetition0:232,MultiplicativeExpressionTail:233,MultiplicativeExpressionTail_group0:234,UnaryExpression_option0:235,PrimaryExpression:236,"-":237,Aggregate:238,FUNC_ARITY0:239,FUNC_ARITY1:240,FUNC_ARITY2:241,",":242,IF:243,BuiltInCall_group0:244,BOUND:245,BNODE:246,BuiltInCall_option0:247,EXISTS:248,COUNT:249,Aggregate_option0:250,Aggregate_group0:251,FUNC_AGGREGATE:252,Aggregate_option1:253,GROUP_CONCAT:254,Aggregate_option2:255,Aggregate_option3:256,GroupConcatSeparator:257,SEPARATOR:258,"=":259,String:260,LANGTAG:261,"^^":262,DECIMAL:263,DOUBLE:264,"true":265,"false":266,STRING_LITERAL1:267,STRING_LITERAL2:268,STRING_LITERAL_LONG1:269,STRING_LITERAL_LONG2:270,INTEGER_POSITIVE:271,DECIMAL_POSITIVE:272,DOUBLE_POSITIVE:273,INTEGER_NEGATIVE:274,DECIMAL_NEGATIVE:275,DOUBLE_NEGATIVE:276,PNAME_LN:277,QueryOrUpdateUnit_repetition0_group0:278,SelectClause_option0_group0:279,DISTINCT:280,REDUCED:281,SelectClause_group0_repetition_plus0:282,"*":283,DescribeQuery_group0_repetition_plus0_group0:284,DescribeQuery_group0_repetition_plus0:285,NAMED:286,SILENT:287,CLEAR:288,DROP:289,ADD:290,MOVE:291,COPY:292,ALL:293,".":294,UNION:295,PropertyListNotEmpty_repetition0_repetition_plus0:296,"|":297,"/":298,PathElt_option0_group0:299,"?":300,"+":301,"||":302,"&&":303,"!=":304,"<":305,">":306,"<=":307,">=":308,NOT:309,CONCAT:310,COALESCE:311,SUBSTR:312,REGEX:313,REPLACE:314,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",11:"BASE",12:"IRIREF",14:"PREFIX",15:"PNAME_NS",23:"SELECT",27:"VAR",28:"(",30:"AS",31:")",33:"CONSTRUCT",37:"WHERE",38:"{",40:"}",42:"DESCRIBE",47:"ASK",50:"FROM",60:"GROUP",61:"BY",67:"HAVING",70:"ORDER",73:"ASC",75:"DESC",78:"LIMIT",79:"INTEGER",80:"OFFSET",82:"VALUES",89:"UNDEF",95:"LOAD",104:"TO",105:"CREATE",107:"GRAPH",108:"INSERTDATA",110:"DELETEDATA",111:"DELETEWHERE",120:"DELETE",121:"INSERT",123:"USING",126:"WITH",128:"INTO",129:"DEFAULT",155:"OPTIONAL",156:"MINUS",158:"SERVICE",161:"FILTER",162:"BIND",163:"NIL",181:"a",192:";",203:"!",208:"^",210:"[",211:"]",213:"BLANK_NODE_LABEL",214:"ANON",222:"IN",237:"-",239:"FUNC_ARITY0",240:"FUNC_ARITY1",241:"FUNC_ARITY2",242:",",243:"IF",245:"BOUND",246:"BNODE",248:"EXISTS",249:"COUNT",252:"FUNC_AGGREGATE",254:"GROUP_CONCAT",258:"SEPARATOR",259:"=",261:"LANGTAG",262:"^^",263:"DECIMAL",264:"DOUBLE",265:"true",266:"false",267:"STRING_LITERAL1",268:"STRING_LITERAL2",269:"STRING_LITERAL_LONG1",270:"STRING_LITERAL_LONG2",271:"INTEGER_POSITIVE",272:"DECIMAL_POSITIVE",273:"DOUBLE_POSITIVE",274:"INTEGER_NEGATIVE",275:"DECIMAL_NEGATIVE",276:"DOUBLE_NEGATIVE",277:"PNAME_LN",280:"DISTINCT",281:"REDUCED",283:"*",286:"NAMED",287:"SILENT",288:"CLEAR",289:"DROP",290:"ADD",291:"MOVE",292:"COPY",293:"ALL",294:".",295:"UNION",297:"|",298:"/",300:"?",301:"+",302:"||",303:"&&",304:"!=",305:"<",306:">",307:"<=",308:">=",309:"NOT",310:"CONCAT",311:"COALESCE",312:"SUBSTR",313:"REGEX",314:"REPLACE"},productions_:[0,[3,3],[7,2],[10,2],[13,3],[16,4],[21,4],[17,3],[26,1],[26,5],[32,5],[32,7],[41,5],[46,4],[49,3],[19,2],[20,4],[59,3],[63,1],[63,1],[63,3],[63,5],[63,1],[66,2],[69,3],[72,2],[72,2],[72,1],[72,1],[77,2],[77,2],[77,4],[77,4],[81,2],[83,4],[83,6],[87,1],[87,1],[87,1],[90,3],[92,2],[94,4],[94,3],[94,5],[94,4],[94,2],[94,2],[94,2],[94,6],[94,6],[117,2],[113,2],[122,3],[125,2],[127,3],[103,1],[103,2],[100,2],[100,1],[109,4],[134,7],[139,3],[54,3],[54,3],[143,2],[146,3],[150,3],[147,2],[147,2],[147,2],[147,3],[147,4],[147,2],[147,6],[147,1],[76,1],[76,1],[76,1],[65,2],[65,6],[166,1],[166,4],[34,3],[169,3],[141,2],[141,2],[175,1],[173,2],[178,2],[179,1],[179,1],[179,1],[180,2],[152,2],[152,2],[184,4],[191,1],[191,3],[194,2],[196,2],[199,2],[198,2],[200,1],[200,1],[200,2],[200,3],[204,1],[204,1],[204,4],[205,1],[205,1],[205,2],[205,2],[174,3],[174,3],[185,3],[185,3],[183,1],[183,1],[189,1],[189,1],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[29,2],[216,2],[218,1],[218,3],[218,4],[219,2],[225,2],[225,2],[225,2],[223,2],[233,2],[231,2],[231,2],[231,2],[236,1],[236,1],[236,1],[236,1],[236,1],[236,1],[74,3],[64,1],[64,2],[64,4],[64,6],[64,8],[64,2],[64,4],[64,2],[64,4],[64,3],[238,5],[238,5],[238,6],[257,4],[88,1],[88,2],[88,3],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[260,1],[260,1],[260,1],[260,1],[227,1],[227,1],[227,1],[229,1],[229,1],[229,1],[52,1],[52,1],[52,1],[278,1],[278,1],[4,0],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[9,0],[9,1],[18,0],[18,2],[22,0],[22,1],[279,1],[279,1],[24,0],[24,1],[282,1],[282,2],[25,1],[25,1],[35,0],[35,2],[36,0],[36,2],[39,0],[39,1],[284,1],[284,1],[285,1],[285,2],[43,1],[43,1],[44,0],[44,2],[45,0],[45,1],[48,0],[48,2],[51,0],[51,1],[53,0],[53,1],[55,0],[55,1],[56,0],[56,1],[57,0],[57,1],[58,0],[58,1],[62,1],[62,2],[68,1],[68,2],[71,1],[71,2],[84,0],[84,2],[85,0],[85,2],[86,0],[86,2],[91,0],[91,2],[93,0],[93,3],[96,0],[96,1],[97,0],[97,1],[98,1],[98,1],[99,0],[99,1],[101,1],[101,1],[101,1],[102,0],[102,1],[106,0],[106,1],[112,0],[112,1],[114,0],[114,1],[115,0],[115,2],[116,0],[116,1],[118,0],[118,1],[119,0],[119,2],[124,0],[124,1],[130,0],[130,1],[131,1],[131,1],[131,1],[132,0],[132,1],[133,0],[133,2],[135,1],[135,1],[136,0],[136,1],[137,0],[137,1],[138,0],[138,1],[140,0],[140,3],[142,0],[142,1],[144,0],[144,1],[145,0],[145,2],[148,0],[148,1],[149,0],[149,1],[151,0],[151,3],[153,0],[153,1],[154,0],[154,3],[157,1],[157,1],[159,0],[159,1],[160,1],[160,1],[164,0],[164,1],[165,0],[165,3],[167,0],[167,3],[168,0],[168,1],[170,0],[170,3],[171,0],[171,1],[176,0],[176,1],[296,1],[296,2],[177,0],[177,3],[182,0],[182,3],[186,0],[186,1],[187,1],[187,1],[188,0],[188,3],[190,0],[190,2],[193,1],[193,1],[195,0],[195,3],[197,0],[197,3],[299,1],[299,1],[299,1],[201,0],[201,1],[202,0],[202,1],[206,0],[206,3],[207,0],[207,1],[209,1],[209,2],[212,1],[212,2],[215,0],[215,3],[217,0],[217,3],[220,1],[220,1],[220,1],[220,1],[220,1],[220,1],[221,0],[221,1],[224,0],[224,2],[226,1],[226,1],[228,0],[228,2],[230,0],[230,2],[232,0],[232,2],[234,1],[234,1],[235,0],[235,1],[244,1],[244,1],[244,1],[244,1],[244,1],[247,0],[247,1],[250,0],[250,1],[251,1],[251,1],[253,0],[253,1],[255,0],[255,1],[256,0],[256,1]],performAction:function($,_,w,T,F,R,A){var C=R.length-1;switch(F){case 1:return R[C-1].prefixes=E.prefixes,E.prefixes=null,kr=Dr=xr="",R[C-1];case 2:this.$=n({type:"query"},R[C-1],R[C]);break;case 3:kr=i(R[C]),Dr=kr.replace(/[^\/]*$/,""),xr=kr.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0];break;case 4:E.prefixes||(E.prefixes={}),R[C-1]=R[C-1].substr(0,R[C-1].length-1),R[C]=i(R[C]),E.prefixes[R[C-1]]=R[C];break;case 5:this.$=n(R[C-3],p(R[C-2]),R[C-1],R[C]);break;case 6:this.$=n({type:"query"},R[C-3],R[C-2],R[C-1],R[C]);break;case 7:this.$=n({queryType:"SELECT",variables:"*"===R[C]?["*"]:R[C]},R[C-1]&&(R[C-2]=e(R[C-1]),R[C-1]={},R[C-1][R[C-2]]=!0,R[C-1]));break;case 8:case 89:case 121:case 146:this.$=s(R[C]);break;case 9:case 21:this.$=l(R[C-3],{variable:s(R[C-1])});break;case 10:this.$=n({queryType:"CONSTRUCT",template:R[C-3]},p(R[C-2]),R[C-1],R[C]);break;case 11:this.$=n({queryType:"CONSTRUCT",template:R[C-2]=R[C-2]?R[C-2].triples:[]},p(R[C-5]),{where:[{type:"bgp",triples:r([],R[C-2])}]},R[C]);break;case 12:this.$=n({queryType:"DESCRIBE",variables:"*"===R[C-3]?["*"]:R[C-3].map(s)},p(R[C-2]),R[C-1],R[C]);break;case 13:this.$=n({queryType:"ASK"},p(R[C-2]),R[C-1],R[C]);break;case 14:case 52:this.$={iri:R[C],named:!!R[C-1]};break;case 15:this.$={where:R[C].patterns};break;case 16:this.$=n(R[C-3],R[C-2],R[C-1],R[C]);break;case 17:this.$={group:R[C]};break;case 18:case 19:case 25:case 27:this.$=l(R[C]);break;case 20:this.$=l(R[C-1]);break;case 22:case 28:this.$=l(s(R[C]));break;case 23:this.$={having:R[C]};break;case 24:this.$={order:R[C]};break;case 26:this.$=l(R[C],{descending:!0});break;case 29:this.$={limit:d(R[C])};break;case 30:this.$={offset:d(R[C])};break;case 31:this.$={limit:d(R[C-2]),offset:d(R[C])};break;case 32:this.$={limit:d(R[C]),offset:d(R[C-2])};break;case 33:this.$={type:"values",values:R[C]};break;case 34:R[C-3]=s(R[C-3]),this.$=R[C-1].map(function(e){var t={};return t[R[C-3]]=e,t});break;case 35:var P=R[C-4].length;R[C-4]=R[C-4].map(s),this.$=R[C-1].map(function(e){if(e.length!==P)throw Error("Inconsistent VALUES length");for(var t={},r=0;P>r;r++)t[R[C-4][r]]=e[r];return t});break;case 38:this.$=void 0;break;case 39:case 62:case 82:case 105:case 147:this.$=R[C-1];break;case 40:this.$={type:"update",updates:t(R[C-1],R[C])};break;case 41:this.$=n({type:"load",silent:!!R[C-2],source:R[C-1]},R[C]&&{destination:R[C]});break;case 42:this.$={type:e(R[C-2]),silent:!!R[C-1],graph:R[C]};break;case 43:this.$={type:e(R[C-4]),silent:!!R[C-3],source:R[C-2],destination:R[C]};break;case 44:this.$={type:"create",silent:!!R[C-2],graph:R[C-1]};break;case 45:this.$={updateType:"insert",insert:R[C]};break;case 46:this.$={updateType:"delete","delete":R[C]};break;case 47:this.$={updateType:"deletewhere","delete":R[C]};break;case 48:this.$=n({updateType:"insertdelete"},R[C-5],{insert:R[C-4]||[]},{"delete":R[C-3]||[]},p(R[C-2]),{where:R[C].patterns});break;case 49:this.$=n({updateType:"insertdelete"},R[C-5],{"delete":R[C-4]||[]},{insert:R[C-3]||[]},p(R[C-2]),{where:R[C].patterns});break;case 50:case 51:case 54:case 138:this.$=R[C];break;case 53:this.$={graph:R[C]};break;case 55:this.$={type:"graph","default":!0};break;case 56:case 57:this.$={type:"graph",name:R[C]};break;case 58:this.$={},this.$[e(R[C])]=!0;break;case 59:this.$=R[C-2]?a(R[C-1],[R[C-2]]):a(R[C-1]);break;case 60:var I=n(R[C-3]||{triples:[]},{type:"graph",name:s(R[C-5])});this.$=R[C]?[I,R[C]]:[I];break;case 61:case 66:this.$={type:"bgp",triples:a(R[C-2],[R[C-1]])};break;case 63:if(R[C-1].length>1){for(var O,k,D=[],x=[],N=0;k=R[C-1][N];N++)switch(k.type){case"bgp":k.triples.length&&(O?r(O.triples,k.triples):t(D,O=k));break;case"filter":t(x,k);break;default:(!k.patterns||k.patterns.length>0)&&(t(D,k),O=null)}R[C-1]=r(D,x)}this.$={type:"group",patterns:R[C-1]};break;case 64:this.$=R[C-1]?a([R[C-1]],R[C]):a(R[C]);break;case 65:this.$=R[C]?[R[C-2],R[C]]:R[C-2];break;case 67:this.$=R[C-1].length?{type:"union",patterns:a(R[C-1].map(f),[f(R[C])])}:f(R[C]);break;case 68:this.$=n(R[C],{type:"optional"});break;case 69:this.$=n(R[C],{type:"minus"});break;case 70:this.$=n(R[C],{type:"graph",name:s(R[C-1])});break;case 71:this.$=n(R[C],{type:"service",name:s(R[C-1]),silent:!!R[C-2]});break;case 72:this.$={type:"filter",expression:R[C]};break;case 73:this.$={type:"bind",variable:s(R[C-1]),expression:R[C-3]};break;case 78:this.$={type:"functionCall","function":R[C-1],args:[]};break;case 79:this.$={type:"functionCall","function":R[C-5],args:t(R[C-2],R[C-1]),distinct:!!R[C-3]};break;case 80:case 96:case 107:case 187:case 197:case 209:case 211:case 221:case 225:case 245:case 247:case 249:case 251:case 253:case 274:case 280:case 291:case 301:case 307:case 313:case 317:case 327:case 329:case 333:case 341:case 343:case 349:case 351:case 355:case 357:case 366:case 374:case 376:case 386:case 390:case 392:case 394:this.$=[];break;case 81:this.$=t(R[C-2],R[C-1]);break;case 83:this.$=a(R[C-2],[R[C-1]]);break;case 84:case 93:this.$=R[C].map(function(e){return n(m(R[C-1]),e)});break;case 85:this.$=r(R[C].map(function(e){return n(m(R[C-1].entity),e)}),R[C-1].triples);break;case 87:this.$=a(R[C-1],[R[C]]);break;case 88:this.$=S(R[C-1],R[C]);break;case 91:case 103:case 110:this.$=$r;break;case 92:this.$=t(R[C-1],R[C]);break;case 94:this.$=R[C]?r(R[C].map(function(e){return n(m(R[C-1].entity),e)}),R[C-1].triples):R[C-1].triples;break;case 95:this.$=S(s(R[C-3]),t(R[C-2],R[C-1]),R[C]);break;case 97:this.$=S(s(R[C-1]),R[C]);break;case 98:this.$=R[C-1].length?c("|",t(R[C-1],R[C])):R[C];break;case 99:this.$=R[C-1].length?c("/",t(R[C-1],R[C])):R[C];break;case 100:this.$=R[C]?c(R[C],[R[C-1]]):R[C-1];break;case 101:this.$=R[C-1]?c(R[C-1],[R[C]]):R[C];break;case 104:case 111:this.$=c(R[C-1],[R[C]]);break;case 108:this.$=c("|",t(R[C-2],R[C-1]));break;case 112:this.$=c(R[C-1],[$r]);break;case 113:case 115:this.$=v(R[C-1]);break;case 114:case 116:this.$=y(R[C-1]);break;case 117:this.$={entity:R[C],triples:[]};break;case 119:this.$={entity:R[C],triples:[]};break;case 125:this.$=h();break;case 126:this.$=Tr;break;case 127:this.$=R[C-1].length?o("||",t(R[C-1],R[C])):R[C];break;case 128:this.$=R[C-1].length?o("&&",t(R[C-1],R[C])):R[C];break;case 130:this.$=o(R[C-1],[R[C-2],R[C]]);break;case 131:this.$=o(R[C-2]?"notin":"in",[R[C-3],R[C]]);break;case 132:case 136:this.$=u(R[C-1],R[C]);break;case 133:case 137:this.$=[R[C-1],R[C]];break;case 134:this.$=["+",u(R[C-1],R[C])];break;case 135:this.$=["-",u(R[C-1].replace("-",""),R[C])];break;case 139:this.$=o(R[C-1],[R[C]]);break;case 140:this.$=o("UMINUS",[R[C]]);break;case 149:this.$=o(e(R[C-1]));break;case 150:this.$=o(e(R[C-3]),[R[C-1]]);break;case 151:this.$=o(e(R[C-5]),[R[C-3],R[C-1]]);break;case 152:this.$=o(e(R[C-7]),[R[C-5],R[C-3],R[C-1]]);break;case 153:this.$=o(e(R[C-1]),R[C]);break;case 154:this.$=o("bound",[s(R[C-1])]);break;case 155:this.$=o(R[C-1],[]);break;case 156:this.$=o(R[C-3],[R[C-1]]);break;case 157:this.$=o(R[C-2]?"notexists":"exists",[f(R[C])]);break;case 158:case 159:this.$=l(R[C-1],{type:"aggregate",aggregation:e(R[C-4]),distinct:!!R[C-2]});break;case 160:this.$=l(R[C-2],{type:"aggregate",aggregation:e(R[C-5]),distinct:!!R[C-3],separator:R[C-1]||" "});break;case 161:this.$=R[C].substr(1,R[C].length-2);break;case 163:this.$=R[C-1]+e(R[C]);break;case 164:this.$=R[C-2]+"^^"+R[C];break;case 165:case 179:this.$=g(R[C],Rr);break;case 166:case 180:this.$=g(R[C],Ar);break;case 167:case 181:this.$=g(e(R[C]),Cr);break;case 170:this.$=Ir;break;case 171:this.$=Or;break;case 172:case 173:this.$=b(R[C],1);break;case 174:case 175:this.$=b(R[C],3);break;case 176:this.$=g(R[C].substr(1),Rr);break;case 177:this.$=g(R[C].substr(1),Ar);break;case 178:this.$=g(R[C].substr(1).toLowerCase(),Cr);break;case 182:this.$=i(R[C]);break;case 183:var L=R[C].indexOf(":"),j=R[C].substr(0,L),B=E.prefixes[j];if(!B)throw new Error("Unknown prefix: "+j);this.$=i(B+R[C].substr(L+1));break;case 184:if(R[C]=R[C].substr(0,R[C].length-1),!(R[C]in E.prefixes))throw new Error("Unknown prefix: "+R[C]);this.$=i(E.prefixes[R[C]]);break;case 188:case 198:case 206:case 210:case 212:case 218:case 222:case 226:case 240:case 242:case 244:case 246:case 248:case 250:case 252:case 275:case 281:case 292:case 308:case 340:case 352:case 371:case 373:case 387:case 391:case 393:case 395:R[C-1].push(R[C]);break;case 205:case 217:case 239:case 241:case 243:case 339:case 370:case 372:this.$=[R[C]];break;case 254:case 302:case 314:case 318:case 328:case 330:case 334:case 342:case 344:case 350:case 356:case 358:case 367:case 375:case 377:R[C-2].push(R[C-1])}},table:[$(_,[2,187],{3:1,4:2}),{1:[3]},$(w,[2,253],{5:3,278:4,7:5,92:6,10:7,13:8,8:9,93:10,16:13,32:14,41:15,46:16,17:17,11:[1,11],14:[1,12],23:T,33:[1,18],42:[1,19],47:[1,20]}),{6:[1,22]},$(_,[2,188]),{6:[2,189]},{6:[2,190]},$(_,[2,185]),$(_,[2,186]),{6:[2,195],9:23,81:24,82:F},{94:26,95:[1,27],98:28,101:29,105:[1,30],108:[1,31],110:[1,32],111:[1,33],112:34,116:35,120:[2,276],121:[2,270],125:41,126:[1,42],288:[1,36],289:[1,37],290:[1,38],291:[1,39],292:[1,40]},{12:[1,43]},{15:[1,44]},$(R,[2,191]),$(R,[2,192]),$(R,[2,193]),$(R,[2,194]),$(A,[2,197],{18:45}),$(C,[2,211],{34:46,36:47,38:[1,48]}),{12:P,15:I,27:O,43:49,52:54,277:k,283:[1,51],284:52,285:50},$(A,[2,225],{48:58}),$(D,[2,203],{24:59,279:60,280:[1,61],281:[1,62]}),{1:[2,1]},{6:[2,2]},{6:[2,196]},{27:[1,64],28:[1,65],83:63},{6:[2,40],192:[1,66]},$(x,[2,255],{96:67,287:[1,68]}),$(N,[2,261],{99:69,287:[1,70]}),$(L,[2,266],{102:71,287:[1,72]}),{106:73,107:[2,268],287:[1,74]},{38:j,109:75},{38:j,109:77},{38:j,109:78},{113:79,121:B},{117:81,120:U},$(V,[2,259]),$(V,[2,260]),$(M,[2,263]),$(M,[2,264]),$(M,[2,265]),{120:[2,277],121:[2,271]},{12:P,15:I,52:83,277:k},$(_,[2,3]),{12:[1,84]},{19:85,37:G,38:q,49:86,50:Y,53:87},$(A,[2,209],{35:90}),{37:[1,91],49:92,50:Y},$(Q,[2,333],{168:93,169:94,170:95,40:[2,331]}),$(J,[2,221],{44:96}),$(J,[2,219],{52:54,284:97,12:P,15:I,27:O,277:k}),$(J,[2,220]),$(W,[2,217]),$(W,[2,215]),$(W,[2,216]),$(H,[2,182]),$(H,[2,183]),$(H,[2,184]),{19:98,37:G,38:q,49:99,50:Y,53:87},{25:100,26:103,27:z,28:X,282:101,283:[1,102]},$(D,[2,204]),$(D,[2,201]),$(D,[2,202]),$(K,[2,33]),{38:[1,106]},$(Z,[2,247],{85:107}),$(w,[2,254]),{12:P,15:I,52:108,277:k},$(x,[2,256]),{100:109,107:[1,110],129:[1,112],131:111,286:[1,113],293:[1,114]},$(N,[2,262]),$(x,ee,{103:115,130:117,107:te,129:re}),$(L,[2,267]),{107:[1,119]},{107:[2,269]},$(ne,[2,45]),$(Q,ae,{132:120,139:121,140:122,40:ie,107:ie}),$(ne,[2,46]),$(ne,[2,47]),$(se,[2,272],{114:123,117:124,120:U}),{38:j,109:125},$(se,[2,278],{118:126,113:127,121:B}),{38:j,109:128},$([120,121],[2,53]),$(_,[2,4]),$(oe,le,{20:129,55:130,59:131,60:ce}),$(A,[2,198]),{38:ue,54:133},$(x,[2,227],{51:135,286:[1,136]}),{38:[2,230]},{19:137,37:G,38:q,49:138,50:Y,53:87},{38:[1,139]},$(C,[2,212]),{40:[1,140]},{40:[2,332]},{12:P,15:I,27:pe,28:de,52:145,79:fe,88:146,141:141,163:ge,172:142,174:143,210:me,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(Oe,[2,223],{53:87,45:170,
49:171,19:172,37:G,38:q,50:Y}),$(W,[2,218]),$(oe,le,{55:130,59:131,20:173,60:ce}),$(A,[2,226]),$(A,[2,7]),$(A,[2,207],{26:174,27:z,28:X}),$(A,[2,208]),$(ke,[2,205]),$(ke,[2,8]),$(De,xe,{29:175,215:176}),$(Ne,[2,245],{84:177}),{27:[1,179],31:[1,178]},$(ne,[2,257],{97:180,127:181,128:[1,182]}),$(ne,[2,42]),{12:P,15:I,52:183,277:k},$(ne,[2,58]),$(ne,[2,286]),$(ne,[2,287]),$(ne,[2,288]),{104:[1,184]},$(Le,[2,55]),{12:P,15:I,52:185,277:k},$(x,[2,285]),{12:P,15:I,52:186,277:k},$(je,[2,291],{133:187}),$(je,[2,290]),{12:P,15:I,27:pe,28:de,52:145,79:fe,88:146,141:188,163:ge,172:142,174:143,210:me,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(se,[2,274],{115:189}),$(se,[2,273]),$([37,120,123],[2,51]),$(se,[2,280],{119:190}),$(se,[2,279]),$([37,121,123],[2,50]),$(R,[2,5]),$(Be,[2,233],{56:191,66:192,67:[1,193]}),$(oe,[2,232]),{61:[1,194]},$([6,40,60,67,70,78,80,82],[2,15]),$(Q,Ue,{21:195,143:196,17:197,144:198,150:199,151:200,23:T,38:Ve,40:Ve,82:Ve,107:Ve,155:Ve,156:Ve,158:Ve,161:Ve,162:Ve}),{12:P,15:I,52:201,277:k},$(x,[2,228]),$(oe,le,{55:130,59:131,20:202,60:ce}),$(A,[2,210]),$(Q,ae,{140:122,39:203,139:204,40:[2,213]}),$(A,[2,82]),{40:[2,335],171:205,294:[1,206]},$(Me,Ge,{173:207,177:208}),$(Me,Ge,{177:208,175:209,176:210,173:211,40:qe,107:qe,294:qe}),$(Ye,[2,121]),$(Ye,[2,122]),$(Ye,[2,123]),$(Ye,[2,124]),$(Ye,[2,125]),$(Ye,[2,126]),{12:P,15:I,27:pe,28:de,52:145,79:fe,88:146,163:ge,172:214,174:215,183:213,209:212,210:me,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(Me,Ge,{177:208,173:216}),$(Qe,[2,162],{261:[1,217],262:[1,218]}),$(Qe,[2,165]),$(Qe,[2,166]),$(Qe,[2,167]),$(Qe,[2,168]),$(Qe,[2,169]),$(Qe,[2,170]),$(Qe,[2,171]),$(Je,[2,172]),$(Je,[2,173]),$(Je,[2,174]),$(Je,[2,175]),$(Qe,[2,176]),$(Qe,[2,177]),$(Qe,[2,178]),$(Qe,[2,179]),$(Qe,[2,180]),$(Qe,[2,181]),$(oe,le,{55:130,59:131,20:219,60:ce}),$(J,[2,222]),$(Oe,[2,224]),$(R,[2,13]),$(ke,[2,206]),{30:[1,220]},$(De,[2,376],{216:221,217:222}),{12:P,15:I,40:[1,223],52:225,79:fe,87:224,88:226,89:We,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},{38:[1,228]},$(Z,[2,248]),$(ne,[2,41]),$(ne,[2,258]),{107:[1,229]},$(ne,[2,57]),$(x,ee,{130:117,103:230,107:te,129:re}),$(Le,[2,56]),$(ne,[2,44]),{40:[1,231],107:[1,233],134:232},$(je,[2,303],{142:234,294:[1,235]}),{37:[1,236],122:237,123:He},{37:[1,239],122:240,123:He},$(ze,[2,235],{57:241,69:242,70:[1,243]}),$(Be,[2,234]),{12:P,15:I,28:Xe,52:259,64:247,65:248,68:244,74:246,76:245,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},{12:P,15:I,27:gt,28:mt,52:259,62:269,63:270,64:271,65:272,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},{40:[1,275]},{40:[1,276]},{19:277,37:G,38:q,53:87},$(ht,[2,307],{145:278}),$(ht,[2,306]),{12:P,15:I,27:pe,28:bt,52:145,79:fe,88:146,152:279,163:ge,172:280,185:281,210:vt,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(J,[2,14]),$(R,[2,10]),{40:[1,284]},{40:[2,214]},{40:[2,83]},$(Q,[2,334],{40:[2,336]}),$(yt,[2,84]),{12:P,15:I,27:[1,287],52:288,178:285,179:286,181:[1,289],277:k},$(yt,[2,85]),$(yt,[2,86]),$(yt,[2,338]),{12:P,15:I,27:pe,28:de,31:[1,290],52:145,79:fe,88:146,163:ge,172:214,174:215,183:291,210:me,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(St,[2,370]),$(Et,[2,117]),$(Et,[2,118]),{211:[1,292]},$(Qe,[2,163]),{12:P,15:I,52:293,277:k},$(R,[2,12]),{27:[1,294]},$([30,31,192,242],[2,127],{302:[1,295]}),$($t,_t,{218:296,219:297,223:298,231:299,235:300,203:wt,237:Tt,301:Ft}),$(K,[2,34]),$(Ne,[2,246]),$(Rt,[2,36]),$(Rt,[2,37]),$(Rt,[2,38]),$(At,[2,249],{86:304}),{12:P,15:I,52:305,277:k},$(ne,[2,43]),$([6,37,120,121,123,192],[2,59]),$(je,[2,292]),{12:P,15:I,27:[1,307],52:308,135:306,277:k},$(je,[2,61]),$(Q,[2,302],{40:Ct,107:Ct}),{38:ue,54:309},$(se,[2,275]),$(x,[2,282],{124:310,286:[1,311]}),{38:ue,54:312},$(se,[2,281]),$(Pt,[2,237],{58:313,77:314,78:[1,315],80:[1,316]}),$(ze,[2,236]),{61:[1,317]},$(Be,[2,23],{74:246,64:247,65:248,238:250,244:255,247:258,52:259,76:318,12:P,15:I,28:Xe,239:Ke,240:Ze,241:et,243:tt,245:rt,246:nt,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft}),$(It,[2,241]),$(Ot,[2,75]),$(Ot,[2,76]),$(Ot,[2,77]),$(De,xe,{215:176,29:319}),$(kt,[2,148]),{163:[1,320]},{28:[1,321]},{28:[1,322]},{28:[1,323]},{28:Dt,163:xt,166:324},{28:[1,327]},{28:[1,329],163:[1,328]},{248:[1,330]},{28:Nt,163:Lt},{28:[1,333]},{28:[1,334]},{28:[1,335]},$(jt,[2,400]),$(jt,[2,401]),$(jt,[2,402]),$(jt,[2,403]),$(jt,[2,404]),{248:[2,406]},$(oe,[2,17],{238:250,244:255,247:258,52:259,64:271,65:272,63:336,12:P,15:I,27:gt,28:mt,239:Ke,240:Ze,241:et,243:tt,245:rt,246:nt,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft}),$(Bt,[2,239]),$(Bt,[2,18]),$(Bt,[2,19]),$(De,xe,{215:176,29:337}),$(Bt,[2,22]),$(Ut,[2,62]),$(Ut,[2,63]),$(oe,le,{55:130,59:131,20:338,60:ce}),{38:[2,317],40:[2,64],81:348,82:F,107:[1,344],146:339,147:340,154:341,155:[1,342],156:[1,343],158:[1,345],161:[1,346],162:[1,347]},$(ht,[2,315],{153:349,294:[1,350]}),$(Vt,Mt,{184:351,187:352,194:353,195:355,27:Gt}),$(qt,[2,345],{187:352,194:353,195:355,186:356,184:357,12:Mt,15:Mt,28:Mt,181:Mt,203:Mt,208:Mt,277:Mt,27:Gt}),{12:P,15:I,27:pe,28:bt,52:145,79:fe,88:146,163:ge,172:360,185:361,189:359,210:vt,212:358,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(Vt,Mt,{187:352,194:353,195:355,184:362,27:Gt}),$(oe,le,{55:130,59:131,20:363,60:ce}),$([40,107,211,294],[2,87],{296:364,192:[1,365]}),$(Q,Yt,{180:366,182:367}),$(Q,[2,89]),$(Q,[2,90]),$(Q,[2,91]),$(Qt,[2,113]),$(St,[2,371]),$(Qt,[2,114]),$(Qe,[2,164]),{31:[1,368]},$(De,[2,375]),$([30,31,192,242,302],[2,128],{303:[1,369]}),$(Jt,[2,129],{220:370,221:371,222:[2,384],259:[1,372],304:[1,373],305:[1,374],306:[1,375],307:[1,376],308:[1,377],309:[1,378]}),$(Wt,[2,386],{224:379}),$(Ht,[2,394],{232:380}),{12:P,15:I,27:zt,28:Xe,52:384,64:383,65:385,74:382,79:fe,88:386,227:156,229:157,236:381,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},{12:P,15:I,27:zt,28:Xe,52:384,64:383,65:385,74:382,79:fe,88:386,227:156,229:157,236:388,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},{12:P,15:I,27:zt,28:Xe,52:384,64:383,65:385,74:382,79:fe,88:386,227:156,229:157,236:389,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},$($t,[2,399]),{28:[1,392],40:[1,390],90:391},$(ne,[2,54]),{38:[1,393]},{38:[2,293]},{38:[2,294]},$(ne,[2,48]),{12:P,15:I,52:394,277:k},$(x,[2,283]),$(ne,[2,49]),$(Pt,[2,16]),$(Pt,[2,238]),{79:[1,395]},{79:[1,396]},{12:P,15:I,27:Xt,28:Xe,52:259,64:247,65:248,71:397,72:398,73:Kt,74:246,75:Zt,76:401,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},$(It,[2,242]),{31:[1,403]},$(kt,[2,149]),$(De,xe,{215:176,29:404}),$(De,xe,{215:176,29:405}),$(De,xe,{215:176,29:406}),$(kt,[2,153]),$(kt,[2,80]),$(De,[2,329],{167:407}),{27:[1,408]},$(kt,[2,155]),$(De,xe,{215:176,29:409}),{38:ue,54:410},$(kt,[2,78]),$(De,[2,325],{164:411,280:[1,412]}),$(er,[2,407],{250:413,280:[1,414]}),$(De,[2,411],{253:415,280:[1,416]}),$(De,[2,413],{255:417,280:[1,418]}),$(Bt,[2,240]),{30:[1,420],31:[1,419]},{22:421,40:[2,199],81:422,82:F},$(ht,[2,308]),$(tr,[2,309],{148:423,294:[1,424]}),{38:ue,54:425},{38:ue,54:426},{38:ue,54:427},{12:P,15:I,27:[1,429],52:430,157:428,277:k},$(rr,[2,321],{159:431,287:[1,432]}),{12:P,15:I,28:Xe,52:259,64:247,65:248,74:246,76:433,238:250,239:Ke,240:Ze,241:et,243:tt,244:255,245:rt,246:nt,247:258,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft},{28:[1,434]},$(nr,[2,74]),$(ht,[2,66]),$(Q,[2,314],{38:ar,40:ar,82:ar,107:ar,155:ar,156:ar,158:ar,161:ar,162:ar}),$(qt,[2,93]),$(Q,[2,349],{188:435}),$(Q,[2,347]),$(Q,[2,348]),$(Vt,[2,357],{196:436,197:437}),$(qt,[2,94]),$(qt,[2,346]),{12:P,15:I,27:pe,28:bt,31:[1,438],52:145,79:fe,88:146,163:ge,172:360,185:361,189:439,210:vt,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(St,[2,372]),$(Et,[2,119]),$(Et,[2,120]),{211:[1,440]},$(R,[2,11]),$(Me,[2,342],{192:[1,441]}),$(ir,[2,339]),$([40,107,192,211,294],[2,88]),{12:P,15:I,27:pe,28:de,52:145,79:fe,88:146,163:ge,172:214,174:215,183:442,210:me,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(ke,[2,9]),$(De,[2,377]),$($t,_t,{223:298,231:299,235:300,219:443,203:wt,237:Tt,301:Ft}),{222:[1,444]},$(De,[2,378]),$(De,[2,379]),$(De,[2,380]),$(De,[2,381]),$(De,[2,382]),$(De,[2,383]),{222:[2,385]},$([30,31,192,222,242,259,302,303,304,305,306,307,308,309],[2,132],{225:445,226:446,227:447,229:448,237:[1,450],271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,301:[1,449]}),$(Wt,[2,136],{233:451,234:452,283:sr,298:or}),$(Ht,[2,138]),$(Ht,[2,141]),$(Ht,[2,142]),$(Ht,[2,143],{28:Nt,163:Lt}),$(Ht,[2,144]),$(Ht,[2,145]),$(Ht,[2,146]),$(Ht,[2,139]),$(Ht,[2,140]),$(K,[2,35]),$(At,[2,250]),$(lr,[2,251],{91:455}),$(Q,ae,{140:122,136:456,139:457,40:[2,295]}),$(se,[2,52]),$(Pt,[2,29],{80:[1,458]}),$(Pt,[2,30],{78:[1,459]}),$(ze,[2,24],{74:246,64:247,65:248,238:250,244:255,247:258,52:259,76:401,72:460,12:P,15:I,27:Xt,28:Xe,73:Kt,75:Zt,239:Ke,240:Ze,241:et,243:tt,245:rt,246:nt,248:at,249:it,252:st,254:ot,277:k,309:lt,310:ct,311:ut,312:pt,313:dt,314:ft}),$(cr,[2,243]),{28:Xe,74:461},{28:Xe,74:462},$(cr,[2,27]),$(cr,[2,28]),$([6,12,15,27,28,30,31,38,40,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],[2,147]),{31:[1,463]},{242:[1,464]},{242:[1,465]},$(De,xe,{215:176,29:466}),{31:[1,467]},{31:[1,468]},$(kt,[2,157]),$(De,[2,327],{165:469}),$(De,[2,326]),$(De,xe,{215:176,251:470,29:472,283:[1,471]}),$(er,[2,408]),$(De,xe,{215:176,29:473}),$(De,[2,412]),$(De,xe,{215:176,29:474}),$(De,[2,414]),$(Bt,[2,20]),{27:[1,475]},{40:[2,6]},{40:[2,200]},$(Q,Ue,{151:200,149:476,150:477,38:ur,40:ur,82:ur,107:ur,155:ur,156:ur,158:ur,161:ur,162:ur}),$(tr,[2,310]),$(nr,[2,67],{295:[1,478]}),$(nr,[2,68]),$(nr,[2,69]),{38:ue,54:479},{38:[2,319]},{38:[2,320]},{12:P,15:I,27:[1,481],52:482,160:480,277:k},$(rr,[2,322]),$(nr,[2,72]),$(De,xe,{215:176,29:483}),{12:P,15:I,27:pe,28:bt,52:145,79:fe,88:146,163:ge,172:360,185:361,189:484,210:vt,213:he,214:be,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},$(St,[2,98],{297:[1,485]}),$(pr,[2,364],{198:486,202:487,208:[1,488]}),$(Ye,[2,115]),$(St,[2,373]),$(Ye,[2,116]),$(ir,[2,340]),$(dr,[2,92],{242:[1,489]}),$(Jt,[2,130]),{28:Dt,163:xt,166:490},$(Wt,[2,387]),$($t,_t,{231:299,235:300,223:491,203:wt,237:Tt,301:Ft}),$(Ht,[2,390],{228:492}),$(Ht,[2,392],{230:493}),$(De,[2,388]),$(De,[2,389]),$(Ht,[2,395]),$($t,_t,{235:300,231:494,203:wt,237:Tt,301:Ft}),$(De,[2,396]),$(De,[2,397]),{12:P,15:I,31:[1,495],52:225,79:fe,87:496,88:226,89:We,227:156,229:157,260:152,263:ve,264:ye,265:Se,266:Ee,267:$e,268:_e,269:we,270:Te,271:Fe,272:Re,273:Ae,274:Ce,275:Pe,276:Ie,277:k},{40:[1,497]},{40:[2,296]},{79:[1,498]},{79:[1,499]},$(cr,[2,244]),$(cr,[2,25]),$(cr,[2,26]),$(kt,[2,150]),$(De,xe,{215:176,29:500}),$(De,xe,{215:176,29:501}),{31:[1,502],242:[1,503]},$(kt,[2,154]),$(kt,[2,156]),$(De,xe,{215:176,29:504}),{31:[1,505]},{31:[2,409]},{31:[2,410]},{31:[1,506]},{31:[2,415],192:[1,509],256:507,257:508},{31:[1,510]},$(ht,[2,65]),$(ht,[2,312]),{38:[2,318]},$(nr,[2,70]),{38:ue,54:511},{38:[2,323]},{38:[2,324]},{30:[1,512]},$(dr,[2,351],{190:513,242:[1,514]}),$(Vt,[2,356]),$([12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,297],[2,99],{298:[1,515]}),{12:P,15:I,28:[1,521],52:518,181:[1,519],199:516,200:517,203:[1,520],277:k},$(pr,[2,365]),$(Q,[2,344]),$(Jt,[2,131]),$(Wt,[2,133]),$(Wt,[2,134],{234:452,233:522,283:sr,298:or}),$(Wt,[2,135],{234:452,233:523,283:sr,298:or}),$(Ht,[2,137]),$(At,[2,39]),$(lr,[2,252]),$(fr,[2,297],{137:524,294:[1,525]}),$(Pt,[2,31]),$(Pt,[2,32]),{31:[1,526]},{242:[1,527]},$(kt,[2,81]),$(De,[2,330]),{31:[1,528],242:[1,529]},$(kt,[2,158]),$(kt,[2,159]),{31:[1,530]},{31:[2,416]},{258:[1,531]},$(Bt,[2,21]),$(nr,[2,71]),{27:[1,532]},$([38,40,82,107,155,156,158,161,162,211,294],[2,95],{191:533,192:[1,534]}),$(Q,[2,350]),$(Vt,[2,358]),$(gr,[2,101]),$(gr,[2,362],{201:535,299:536,283:[1,538],300:[1,537],301:[1,539]}),$(mr,[2,102]),$(mr,[2,103]),{12:P,15:I,28:[1,543],52:544,163:[1,542],181:hr,204:540,205:541,208:br,277:k},$(Vt,Mt,{195:355,194:547}),$(Ht,[2,391]),$(Ht,[2,393]),$(Q,ae,{140:122,138:548,139:549,40:vr,107:vr}),$(fr,[2,298]),$(kt,[2,151]),$(De,xe,{215:176,29:550}),$(kt,[2,79]),$(De,[2,328]),$(kt,[2,160]),{259:[1,551]},{31:[1,552]},$(dr,[2,352]),$(dr,[2,96],{195:355,193:553,194:554,12:Mt,15:Mt,28:Mt,181:Mt,203:Mt,208:Mt,277:Mt,27:[1,555]}),$(gr,[2,100]),$(gr,[2,363]),$(gr,[2,359]),$(gr,[2,360]),$(gr,[2,361]),$(mr,[2,104]),$(mr,[2,106]),$(mr,[2,107]),$(yr,[2,366],{206:556}),$(mr,[2,109]),$(mr,[2,110]),{12:P,15:I,52:557,181:[1,558],277:k},{31:[1,559]},$(je,[2,60]),$(je,[2,300]),{31:[1,560]},{260:561,267:$e,268:_e,269:we,270:Te},$(nr,[2,73]),$(Q,Yt,{182:367,180:562}),$(Q,[2,353]),$(Q,[2,354]),{12:P,15:I,31:[2,368],52:544,181:hr,205:564,207:563,208:br,277:k},$(mr,[2,111]),$(mr,[2,112]),$(mr,[2,105]),$(kt,[2,152]),{31:[2,161]},$(dr,[2,97]),{31:[1,565]},{31:[2,369],297:[1,566]},$(mr,[2,108]),$(yr,[2,367])],defaultActions:{5:[2,189],6:[2,190],22:[2,1],23:[2,2],24:[2,196],74:[2,269],89:[2,230],94:[2,332],204:[2,214],205:[2,83],268:[2,406],307:[2,293],308:[2,294],378:[2,385],421:[2,6],422:[2,200],429:[2,319],430:[2,320],457:[2,296],471:[2,409],472:[2,410],478:[2,318],481:[2,323],482:[2,324],508:[2,416],561:[2,161]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=g.lex()||d,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],a=[null],i=[],s=this.table,o="",l=0,c=0,u=0,p=2,d=1,f=i.slice.call(arguments,1),g=Object.create(this.lexer),m={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(m.yy[h]=this.yy[h]);g.setInput(e,m.yy),m.yy.lexer=g,m.yy.parser=this,"undefined"==typeof g.yylloc&&(g.yylloc={});var b=g.yylloc;i.push(b);var v=g.options&&g.options.ranges;this.parseError="function"==typeof m.yy.parseError?m.yy.parseError:Object.getPrototypeOf(this).parseError;for(var y,S,E,$,_,w,T,F,R,A={};;){if(E=n[n.length-1],this.defaultActions[E]?$=this.defaultActions[E]:((null===y||"undefined"==typeof y)&&(y=t()),$=s[E]&&s[E][y]),"undefined"==typeof $||!$.length||!$[0]){var C="";R=[];for(w in s[E])this.terminals_[w]&&w>p&&R.push("'"+this.terminals_[w]+"'");C=g.showPosition?"Parse error on line "+(l+1)+":\n"+g.showPosition()+"\nExpecting "+R.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(y==d?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:g.match,token:this.terminals_[y]||y,line:g.yylineno,loc:b,expected:R})}if($[0]instanceof Array&&$.length>1)throw new Error("Parse Error: multiple actions possible at state: "+E+", token: "+y);switch($[0]){case 1:n.push(y),a.push(g.yytext),i.push(g.yylloc),n.push($[1]),y=null,S?(y=S,S=null):(c=g.yyleng,o=g.yytext,l=g.yylineno,b=g.yylloc,u>0&&u--);break;case 2:if(T=this.productions_[$[1]][1],A.$=a[a.length-T],A._$={first_line:i[i.length-(T||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(T||1)].first_column,last_column:i[i.length-1].last_column},v&&(A._$.range=[i[i.length-(T||1)].range[0],i[i.length-1].range[1]]),_=this.performAction.apply(A,[o,c,l,m.yy,$[1],a,i].concat(f)),"undefined"!=typeof _)return _;T&&(n=n.slice(0,-1*T*2),a=a.slice(0,-1*T),i=i.slice(0,-1*T)),n.push(this.productions_[$[1]][0]),a.push(A.$),i.push(A._$),F=s[n[n.length-2]][n[n.length-1]],n.push(F);break;case 3:return!0}}return!0}},Er="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$r=Er+"type",_r=Er+"first",wr=Er+"rest",Tr=Er+"nil",Fr="http://www.w3.org/2001/XMLSchema#",Rr=Fr+"integer",Ar=Fr+"decimal",Cr=Fr+"double",Pr=Fr+"boolean",Ir='"true"^^'+Pr,Or='"false"^^'+Pr,kr="",Dr="",xr="",Nr=0;E._resetBlanks=function(){Nr=0};var Lr=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,jr={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:"\n",r:"\r",f:"\f"},Br=String.fromCharCode,Ur=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in a)this[i]=a[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),i=0;i<a.length;i++)if(r=this._input.match(this.rules[a[i]]),r&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(e=this.test_match(r,a[i]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,a[n]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(e,t,r,n){switch(r){case 0:break;case 1:return 11;case 2:return 14;case 3:return 23;case 4:return 280;case 5:return 281;case 6:return 28;case 7:return 30;case 8:return 31;case 9:return 283;case 10:return 33;case 11:return 37;case 12:return 38;case 13:return 40;case 14:return 42;case 15:return 47;case 16:return 50;case 17:return 286;case 18:return 60;case 19:return 61;case 20:return 67;case 21:return 70;case 22:return 73;case 23:return 75;case 24:return 78;case 25:return 80;case 26:return 82;case 27:return 192;case 28:return 95;case 29:return 287;case 30:return 128;case 31:return 288;case 32:return 289;case 33:return 105;case 34:return 290;case 35:return 104;case 36:return 291;case 37:return 292;case 38:return 108;case 39:return 110;case 40:return 111;case 41:return 126;case 42:return 120;case 43:return 121;case 44:return 123;case 45:return 129;case 46:return 107;case 47:return 293;case 48:return 294;case 49:return 155;case 50:return 158;case 51:return 162;case 52:return 89;case 53:return 156;case 54:return 295;case 55:return 161;case 56:return 242;case 57:return 181;case 58:return 297;case 59:return 298;case 60:return 208;case 61:return 300;case 62:return 301;case 63:return 203;case 64:return 210;case 65:return 211;case 66:return 302;case 67:return 303;case 68:return 259;case 69:return 304;case 70:return 305;case 71:return 306;case 72:return 307;case 73:return 308;case 74:return 222;case 75:return 309;case 76:return 237;case 77:return 245;case 78:return 246;case 79:return 239;case 80:return 240;case 81:return 241;case 82:return 310;case 83:return 311;case 84:return 243;case 85:return 313;case 86:return 312;case 87:return 314;case 88:return 248;case 89:return 249;case 90:return 252;case 91:return 254;case 92:return 258;case 93:return 262;case 94:return 265;case 95:return 266;case 96:return 12;case 97:return 15;case 98:return 277;case 99:return 213;case 100:return 27;case 101:return 261;case 102:return 79;case 103:return 263;case 104:return 264;case 105:return 271;case 106:return 272;case 107:return 273;case 108:return 274;case 109:return 275;case 110:return 276;case 111:return"EXPONENT";case 112:return 267;case 113:return 268;case 114:return 269;case 115:return 270;case 116:return 163;case 117:return 214;case 118:return 6;case 119:return"INVALID";case 120:console.log(t.yytext)}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT\s+DATA)/i,/^(?:DELETE\s+DATA)/i,/^(?:DELETE\s+WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(<([^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?))/i,/^(?:([\?\$]((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(([^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*'))/i,/^(?:("(([^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*"))/i,/^(?:('''(('|'')?([^'\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*'''))/i,/^(?:("""(("|"")?([^\"\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],
conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],inclusive:!0}}};return e}();return Sr.lexer=Ur,E.prototype=Sr,Sr.Parser=E,new E}();"undefined"!=typeof e&&"undefined"!=typeof r&&(r.parser=a,r.Parser=a.Parser,r.parse=function(){return a.parse.apply(a,arguments)},r.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),n.exit(1));var a=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return r.parser.parse(a)},"undefined"!=typeof t&&e.main===t&&r.main(n.argv.slice(1)))}).call(this,e("_process"))},{_process:3,fs:1,path:2}],6:[function(e,t,r){var n=e("./lib/SparqlParser").Parser,a=e("./lib/SparqlGenerator");t.exports={Parser:function(e){var t={};for(var r in e||{})t[r]=e[r];var a=new n;return a.parse=function(){return n.prefixes=Object.create(t),n.prototype.parse.apply(a,arguments)},a._resetBlanks=n._resetBlanks,a},Generator:a}},{"./lib/SparqlGenerator":4,"./lib/SparqlParser":5}]},{},[6])(6)}),function(){"use strict";function e(e,t){var r=new sparqljs.Parser(t.prefixes),n=new sparqljs.Generator;return{parse:r.parse,stringify:function(t){var r=_.defaults({prefixes:{}},t);return r=n.stringify(r),r=e("replaceURIsWithPrefixes")(r,!0),r=e("beautifySPARQL")(r)}}}angular.module("SPARQLJS",["VSB.config","VSB.filters"]).factory("sparqljs",e),e.$inject=["$filter","globalConfig"]}(),function(){"use strict";function e(e,t){e.state("workspace",{url:"/workspace",views:{content:{controller:"WorkspaceCtrl",controllerAs:"vm",templateUrl:"/modules/workspace/content.tpl.html"},navigation:{controller:"WorkspaceNavigationCtrl",controllerAs:"vm",templateUrl:"/modules/workspace/navigation.tpl.html"}}}),e.state("result",{url:"/result",views:{content:{controller:"ResultCtrl",controllerAs:"vm",templateUrl:"/modules/result/content.tpl.html",resolve:{JSON:["ParserManager","$timeout",function(e,t){return t(function(){return e.translateVSBLToSPARQL()},300)}]}},navigation:{templateUrl:"/modules/result/navigation.tpl.html"}}}),t.otherwise("/workspace")}function t(e,t){var r=e.$on("$stateChangeStart",function(e,n){return"workspace"===n.name?void r():(e.preventDefault(),void t.go("workspace"))})}function r(e,t,r,n,a){function i(i){return _.isBoolean(i)||(i=!0),r.setItem("switchStatus",[i]).then(function(){return e.switchStatus=i,t.$emit("mainOffset",i),a(function(){n.repaintEverything()},0),i})}e.switchStatus=!0,e.setSwitchStatus=function(e){i(e).then(function(e){e?t.$emit("moveSubjectDrag",{x:200,y:0},!0):t.$emit("moveSubjectDrag",{x:-200,y:0},!0)})},r.getItem("switchStatus").then(function(e){i(_.isArray(e)?e[0]:e)},function(){i(!0)}),t.$on("updateJSON",function(t,r){var n=new Blob([r],{type:"application/json"});e.blobURL=URL.createObjectURL(n)})}angular.module("VSB.layout",["VSB.layout.workspace","VSB.layout.workspace.navigation","VSB.layout.result","VSB.language","ui.router"]).controller("NavigationCtrl",r).config(e).run(t),e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$rootScope","$state"],r.$inject=["$scope","$rootScope","$localForage","ArrowService","$timeout"]}(),function(){"use strict";function e(e){return function(t,n){if(!_.isString(t))return t;n&&(t=t.replace(r,"a"));var a="";return _.forEach(e.prefixes,function(e,r){var i=new RegExp("<?"+e+"(\\w+)>?","ig");i.test(t)&&(t=t.replace(i,r+":$1"),n&&(a+="PREFIX "+r+": <"+e+">\n"))}),a+t}}function t(){return function(e){return e.replace(/where\s+/gi,"\nWHERE").replace(/limit/gi,"LIMIT").replace(/ +\.\s+/gi," .\n").replace(/ +;\s+/gi," .\n").replace(/^\?/gim,"	?").replace(/^FILTER/gim,"	FILTER").replace(/^BIND/gim,"	BIND").replace(/select distinct\s+/gi,"SELECT DISTINCT \n")}}angular.module("VSB.filters",["VSB.config"]).filter("replaceURIsWithPrefixes",e).filter("beautifySPARQL",t);var r=new RegExp("<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>","ig");e.$inject=["globalConfig"]}(),function(){"use strict";function e(e,t,r,n,a){var i={},s=new Jassa(Promise,function(t){var r=Promise.defer(),n=s.util.PromiseUtils.createDeferred(!0);return t.timeout=r.promise,t.params=t.data,delete t.data,e(t).success(n.resolve).error(n.reject),n.promise()["catch"](Promise.TimeoutError,Promise.CancellationError,function(e){throw r.resolve(),e})}),o=s.sparql,l=s.service,c=s.sponate,u=new l.SparqlServiceHttp(n.baseURL,n.defaultGraphURIs);u=new l.SparqlServiceCache(u);var p=new c.StoreFacade(u,n.prefixes);i.runSponateMap=function(e){var t=e.name,r=["de","en",""],n=new o.BestLabelConfig(r),a=c.MappedConceptUtils.createMappedConceptBestLabel(n);e.template[0].rows[0]=_.mapValues(e.template[0].rows[0],function(e,t){return _.startsWith(t,"$")?{id:e,label:{$ref:{target:a,on:e,attr:"displayLabel"}}}:e}),p.addMap(e);var i=p[t].find().limit(100);return i.list()};var d=function(e){return null===e||void 0===e?e:e.replace(/^<+/,"").replace(/>+$/,"")};i.extractLabelFromURI=function(e){e=d(e);var t=e.lastIndexOf("#"),r=e.lastIndexOf("/");return e.substr(t>r?t+1:r+1)};var f=function(e,r,n){var s=!1,o=[];return r.forEach(function(t){o.push(a.setItem(t.id,e+".$label",t.value)),s=s||"default"===t.id}),s||o.push(a.setItem("default",e+".$label",i.extractLabelFromURI(e))),n.forEach(function(t){o.push(a.setItem(t.id,e+".$comment",t.value))}),t.all(o)};i.getPropertyType=function(e){var t=_.find(n.propertyTypeByType,function(t,r){return new RegExp(r).test(e.$type)});return t?t:(t=_.find(n.propertyTypeByRange,function(t,r){return new RegExp(r).test(e.$range)}),t?t:"STANDARD_PROPERTY")},i.getAvailableClasses=function(e){p.hasOwnProperty("classes")||p.addMap({name:"classes",template:[{id:"?uri",$labels:[{id:"?label_loc",value:"?label"}],$comments:[{id:"?comment_loc",value:"?comment"}]}],from:n.endPointQueries.getAvailableClasses});var r=p.classes.find();return r.list().then(function(r){var n=[];return r=_.pluck(r,"val"),e&&(r=_.filter(r,{id:d(e)})),r.forEach(function(e){e.uri=d(e.id),n.push(f(e.uri,e.$labels,e.$comments))}),t.all(n).then(function(){return r})})};var g=function(e,t,n){p.hasOwnProperty(n+e)||p.addMap({name:n+e,template:[{id:"?uri"}],from:t});var a=p[n+e].find();return a.list().then(function(e){return _.pluck(_.pluck(e,"val"),"id")},function(e){return r.error("An error occurred: ",e),[]})};i.getSuperAndEqClasses=function(e){return g(d(e),n.endPointQueries.getSuperAndEqClasses.replace("%uri%",d(e)),"SuperAndEqClasses")},i.getSubAndEqClasses=function(e){return g(d(e),n.endPointQueries.getSubAndEqClasses.replace("%uri%",d(e)),"SubAndEqClasses")};var m=function(e,t,r,a){var s=r?"InverseProperties":"DirectProperties";p.hasOwnProperty(s+e)||p.addMap({name:s+e,template:[{id:"?uri",$labels:[{id:"?label_loc",value:"?label"}],$comments:[{id:"?comment_loc",value:"?comment"}],$range:[{id:"?range"}],$type:"?type"}],from:t});var o=p[s+e].find();return o.list().then(function(e){return e=_.pluck(e,"val"),a&&(e=_.filter(e,{id:d(a)})),r||(e=_.union([],e,angular.copy(n.defaultProperties),angular.copy(n.aggregateFunctions))),e.forEach(function(e){e.$range=_.pluck(e.$range,"id"),e.uri=d(e.id),delete e.id,f(e.uri,e.$labels,e.$comments),r?e.type="INVERSE_PROPERTY":e.type||(e.type=i.getPropertyType(e))}),e})};return i.getDirectProperties=function(e,t){return m(d(e),n.endPointQueries.getDirectProperties.replace("%uri%",e),!1,t)},i.getInverseProperties=function(e,t){return m(d(e),n.endPointQueries.getInverseProperties.replace("%uri%",e),!0,t)},i.getPropertyDetails=function(e,t){return"INVERSE_PROPERTY"===t.type?i.getInverseProperties(d(e),t.uri):i.getDirectProperties(d(e),t.uri)},i.getPossibleRelations=function(e,t){var a=e+t;p.hasOwnProperty(a)||p.addMap({name:a,template:[{id:"?uri"}],from:n.endPointQueries.getPossibleRelation.replace("%uri1%",e).replace("%uri2%",t)});var i=p[a].find();return i.list().then(function(e){return e=_(e).pluck("val").pluck("id").value()},function(e){return r.error("An error occurred: ",e),[]})},i}angular.module("VSB.endPointService",["VSB.config"]).factory("EndPointService",e),e.$inject=["$http","$q","$log","globalConfig","languageStorage"]}(),function(){"use strict";function e(e,t,r,n,a){var i={steps:[{intro:'{{ "HELP_FIRST" | translate}}',tooltipClass:"wide"},{intro:"<div><h2>Arbeitsflche</h2><p>Im Hintergrund sehen Sie die Arbeitsflche, das Kernstck des VSB.... </p></div>"},{element:"#navigation",intro:"<div><h2>Navigation</h2><p>Here will be an explanation for the tour</p></div>",position:"right"},{intro:"<div>This is it for now.</div>",position:"Future implementations will hold more helpful information"}],showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,showStepNumbers:!1,nextLabel:'Weiter <i class="fa fa-chevron-right"></i>',prevLabel:'<i class="fa fa-chevron-left"></i> Zurck',skipLabel:"Abbruch",doneLabel:"Fertig"},s=null;a.$on("$translateChangeSuccess",function(t,o){if(o.language!==s){s=o.language;var l=angular.copy(i);l.steps=_.map(l.steps,function(e){var t=a.$new(!1),i=n("<div>"+e.intro+"</div>")(t),s=r(i);return e.intro=s(t)[0].outerHTML,e}),e.IntroOptions=l}}),e.saveJSON=function(){e.$broadcast("saveJsonEvent")},e.initializeWorkspace=function(){t.debug("Initialized Workspace"),e.translatedJSON="In the near future the translated JSON will be here.",e.translatedSPARQL="In the near future the translated SPARQL will be here."},e.initializeWorkspace()}angular.module("VSB.mainCtrl",["VSB.config","angular-intro"]).controller("MainCtrl",e),e.$inject=["$scope","$log","$compile","$interpolate","$rootScope"]}(),function(){"use strict";angular.module("VSB.config",[]).constant("globalConfig",{name:"STANDARD_CONFIG",propertyTypeByType:{"http://www.w3.org/2002/07/owl#ObjectProperty":"OBJECT_PROPERTY"},propertyTypeByRange:{"http://vsb.leipert.io/ns/":"OBJECT_PROPERTY","http://purl.org/ontology/mo/":"OBJECT_PROPERTY","http://xmlns.com/foaf/0.1/":"OBJECT_PROPERTY","http://www.w3.org/2001/XMLSchema#(integer|float|double|decimal|positiveInteger|nonNegativeInteger)":"NUMBER_PROPERTY","http://www.w3.org/2001/XMLSchema#(string|literal)":"STRING_PROPERTY","http://www.w3.org/2000/01/rdf-schema#Literal":"STRING_PROPERTY","http://www.w3.org/2001/XMLSchema#date":"DATE_PROPERTY"},prefixes:{mo:"http://purl.org/ontology/mo/",xsd:"http://www.w3.org/2001/XMLSchema#",yago:"http://yago-knowledge.org/resource/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",foaf:"http://xmlns.com/foaf/0.1/",dbo:"http://dbpedia.org/ontology/",dbp:"http://dbpedia.org/property/",dc:"http://purl.org/dc/elements/1.1/",owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",ont:"http://purl.org/net/ns/ontology-annot#",skos:"http://www.w3.org/2004/02/skos/core#",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#"},resultFormats:[{name:"HTML",format:"text/html"},{name:"editable Query",format:"text/html",qtxt:!0},{name:"XML",format:"application/sparql-results+xml"},{name:"JSON",format:"application/sparql-results+json"},{name:"CSV",format:"text/csv"},{name:"TSV",format:"text/tab-separated-values"},{name:"Excel",format:"application/vnd.ms-excel"},{name:"Turtle",format:"text/turtle"},{name:"RDF XML",format:"application/rdf+xml"},{name:"N-TRIPLE",format:"text/plain"},{name:"Javascript",format:"application/javascript"}],defaultProperties:[{id:"http://www.w3.org/2000/01/rdf-schema#label",$labels:[{id:"default",value:"Label"}],$comments:[{id:"default",value:"This is the label of this subject."}],type:"STRING_PROPERTY"},{id:"$$uri",$labels:[{id:"default",value:"uri"}],$comments:[{id:"default",value:"The uri of this subject."}],type:"STRING_PROPERTY"}],defaultGraphURIs:[],baseURL:"https://leipert.io/sparql",resultURL:"https://leipert.io/sparql?timeout=5000&debug=on",languages:{StringComparison:["*","de","en"],GUI:["de","en"]},aggregateFunctions:[{id:"$$count",$labels:[{id:"default",value:"Count property"}],$comments:[{id:"default",value:"Counts how often a subject has a certain property."}],operator:"COUNT(%alias%)",type:"AGGREGATE_PROPERTY",restrictTo:null},{id:"$$concat",$labels:[{id:"default",value:"Concat property"}],$comments:[{id:"default",value:"Concats all values of the same property URI."}],operator:'GROUP_CONCAT(%alias%,", ")',type:"AGGREGATE_PROPERTY",restrictTo:null},{id:"$$sum",$labels:[{id:"default",value:"Sum a property"}],$comments:[{id:"default",value:"Sums up all values a number property."}],operator:"SUM(%alias%)",type:"AGGREGATE_PROPERTY",restrictTo:"NUMBER_PROPERTY"},{id:"$$avg",$labels:[{id:"default",value:"Average a property"}],$comments:[{id:"default",value:"Returns the average of a number property."}],operator:"AVG(%alias%)",type:"AGGREGATE_PROPERTY",restrictTo:"NUMBER_PROPERTY"},{id:"$$min",$labels:[{id:"default",value:"Get minimum of a property"}],$comments:[{id:"default",value:"Returns the minimum of a number property."}],operator:"MIN(%alias%)",type:"AGGREGATE_PROPERTY",restrictTo:"NUMBER_PROPERTY"},{id:"$$max",$labels:[{id:"default",value:"Get maximum of a property"}],$comments:[{id:"default",value:"Returns the maximum of a number property."}],operator:"MAX(%alias%)",type:"AGGREGATE_PROPERTY",restrictTo:"NUMBER_PROPERTY"}],endPointQueries:{getDirectProperties:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class .?uri rdfs:domain ?class .OPTIONAL { ?uri rdfs:range ?range }  .OPTIONAL { ?uri rdf:type ?type }  .OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc) } .FILTER ( !isBlank(?class) && !isBlank(?uri) && !isBlank(?range) ) ",getInverseProperties:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class .?uri rdfs:range ?class .OPTIONAL { ?uri rdfs:domain ?range }  .OPTIONAL { ?uri rdf:type ?type }  .OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc) } .FILTER ( !isBlank(?class) && !isBlank(?uri) && !isBlank(?range) ) ",getSuperAndEqClasses:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?uri FILTER ( !isBlank(?uri) )",getSubAndEqClasses:"<%uri%> (^rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?uri FILTER ( !isBlank(?uri) )",getAvailableClasses:"{?uri a rdfs:Class .} UNION {?uri a owl:Class .} .FILTER ( !isBlank(?uri) )OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc)} ",getPossibleRelation:"<%uri1%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class1 .<%uri2%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class2 .{ ?uri rdfs:domain ?class1 . ?uri rdfs:range ?class2  .} UNION { ?uri rdfs:domain ?class2 . ?uri rdfs:range ?class1  .}"}})}();